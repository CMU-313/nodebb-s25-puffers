(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[46379,99127,34271,1091,92332,88189,6232,18732,87212,33069,62441,98463,49897,29567,49775,11484,23346],{49897:(E,w,a)=>{"use strict";a.r(w),a.d(w,{del:()=>i,get:()=>c,head:()=>u,patch:()=>t,post:()=>f,put:()=>e});var b=a(91749),h=a.n(b),g=a(40027),d=a.n(g);const n=config.relative_path+"/api/v3";async function l(o,r){if(o.url=o.url.startsWith("/api")?config.relative_path+o.url:n+o.url,typeof r=="function"){m(o).then(s=>r(null,s),s=>r(s));return}try{return await m(o)}catch(s){if(s.message==="A valid login session was not found. Please log in and try again."){const{url:v}=await(0,b.fire)("filter:admin.reauth",{url:"login"});return(0,g.confirm)("[[error:api.reauth-required]]",S=>{S&&ajaxify.go(v)})}throw s}}async function m(o){const{url:r}=o;delete o.url,o.data&&!(o.data instanceof FormData)&&(o.data=JSON.stringify(o.data||{}),o.headers["content-type"]="application/json; charset=utf-8"),{options:o}=await(0,b.fire)("filter:api.options",{options:o}),o.data&&(o.body=o.data,delete o.data);const s=await fetch(r,o),{headers:v}=s,S=v.get("content-type"),P=S&&S.startsWith("application/json");let p;if(o.method!=="HEAD"&&(P?p=await s.json():p=await s.text()),!s.ok)throw p?new Error(P?p.status.message:p):new Error(s.statusText);return P&&p&&p.hasOwnProperty("status")&&p.hasOwnProperty("response")?p.response:p}function c(o,r,s){return l({url:o+(r&&Object.keys(r).length?"?"+$.param(r):"")},s)}function u(o,r,s){return l({url:o+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"HEAD"},s)}function f(o,r,s){return l({url:o,method:"POST",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}function t(o,r,s){return l({url:o,method:"PATCH",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}function e(o,r,s){return l({url:o,method:"PUT",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}function i(o,r,s){return l({url:o,method:"DELETE",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}},74566:(E,w,a)=>{E.exports=a(12236)},449:(E,w,a)=>{E.exports=a(91943)},89596:(E,w,a)=>{E.exports=a(62590)},99594:(E,w,a)=>{E.exports=a(57904)},68636:(E,w,a)=>{"use strict";var b;b=function(){function h(){this._store={},this._keys=[]}h.prototype.isMock=!0,h.prototype.setItem=function(n,l){n=String(n),this._keys.indexOf(n)===-1&&this._keys.push(n),this._store[n]=l},h.prototype.getItem=function(n){return n=String(n),this._keys.indexOf(n)===-1?null:this._store[n]},h.prototype.removeItem=function(n){n=String(n),this._keys=this._keys.filter(function(l){return l!==n}),this._store[n]=null},h.prototype.clear=function(){this._keys=[],this._store={}},h.prototype.key=function(n){return n=parseInt(n,10)||0,this._keys[n]},Object.defineProperty&&Object.defineProperty(h.prototype,"length",{get:function(){return this._keys.length}});let g;const d=Date.now().toString();try{if(g=window.localStorage,g.setItem(d,d),g.getItem(d)!==d)throw Error("localStorage behaved unexpectedly");return g.removeItem(d),g}catch(n){console.warn(n),console.warn("localStorage failed, falling back on sessionStorage");try{if(g=window.sessionStorage,g.setItem(d,d),g.getItem(d)!==d)throw Error("sessionStorage behaved unexpectedly");return g.removeItem(d),g}catch(l){return console.warn(l),console.warn("sessionStorage failed, falling back on memory storage"),new h}}}.call(w,a,w,E),b!==void 0&&(E.exports=b)},14063:(E,w,a)=>{"use strict";E=a.nmd(E);var b,h;b=[a(17459),a(91749)],h=function(g,d){const n={};let l=!1;n.init=function(){if(n.taskbar=$('[component="taskbar"]'),n.tasklist=n.taskbar.find("ul"),!n.taskbar.length||!n.tasklist.length){l=!0;return}n.taskbar.on("click","li",async function(){const t=$(this),e=t.attr("data-module"),i=t.attr("data-uuid"),o=await app.require(e);return t.hasClass("active")?o.minimize(i):(c(),o.load(i),n.toggleNew(i,!1),n.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){n.closeAll()})},n.close=async function(t,e){if(l)return;if(n.tasklist.find('[data-module="'+E+'"][data-uuid="'+e+'"]').length){const o=await app.require(t);o&&typeof o.close=="function"&&o.close(e)}},n.closeAll=function(t){if(l)return;let e="[data-uuid]";t&&(e='[data-module="'+t+'"]'+e),n.tasklist.find(e).each(function(i,o){n.close(t||o.getAttribute("data-module"),o.getAttribute("data-uuid"))})},n.discard=function(t,e){if(l)return;n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').remove(),m()},n.push=function(t,e,i,o){if(o=o||function(){},l)return o();const r=n.tasklist.find('li[data-uuid="'+e+'"]'),s={module:t,uuid:e,options:i,element:r};d.fire("filter:taskbar.push",s),!r.length&&s.module?u(s,o):o(r)},n.get=function(t){return l?[]:$('[data-module="'+t+'"]').map(function(i,o){return $(o).data()})},n.minimize=function(t,e){if(l)return;n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').toggleClass("active",!1)},n.toggleNew=function(t,e,i){if(l)return;n.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",e),i||d.fire("action:taskbar.toggleNew",t)},n.updateActive=function(t){if(l)return;const e=n.tasklist.find("li");e.removeClass("active"),e.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(t){return l?!1:n.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function m(){if(l)return;n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function c(){l||n.tasklist.find(".active").removeClass("active")}function u(t,e){if(l)return e();g.translate(t.options.title,function(i){const o=$("<div></div>").text(i||"NodeBB Task").html(),r=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+o+'" component="taskbar/title">'+o+"</span></a>").attr({title:o,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&c(),n.tasklist.append(r),m(),t.element=r,r.data(t),d.fire("action:taskbar.pushed",t),e(r)})}const f=function(t,e,i){switch(e){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i);break;case"color":t.find("a").css("color",i);break}};return n.update=function(t,e,i){if(l)return;const o=n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]');if(!o.length)return;const r=o.data();Object.keys(i).forEach(function(s){r[s]=i[s],f(o,s,i[s])}),o.data(r)},n}.apply(w,b),h!==void 0&&(E.exports=h)},36159:(E,w,a)=>{"use strict";var b,h;b=[a(49897),a(40027),a(29930),a(24187),a(81335),a(17459),a(65285)],h=function(g,d,n,l,m,c){const u={};return u.get=f=>g.get(`/topics/${f}/thumbs`,{}),u.getByPid=f=>g.get(`/posts/${f}`,{}).then(t=>u.get(t.tid)),u.delete=(f,t)=>g.del(`/topics/${f}/thumbs`,{path:t}),u.deleteAll=f=>{u.get(f).then(t=>{Promise.all(t.map(e=>u.delete(f,e.url)))})},u.upload=f=>new Promise(t=>{l.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+`/api/v3/topics/${f}/thumbs`},function(e){t(e)})}),u.modal={},u.modal.open=function(f){const{id:t,pid:e}=f;let{modal:i}=f,o;return new Promise(r=>{Promise.all([u.get(t),e?u.getByPid(e):[]]).then(s=>new Promise(v=>{const S=s.reduce((P,p)=>P.concat(p));o=S.length,v(S)})).then(s=>m.render("modals/topic-thumbs",{thumbs:s})).then(s=>{i?c.translate(s,function(v){i.find(".bootbox-body").html(v),u.modal.handleSort({modal:i,numThumbs:o})}):(i=d.dialog({title:"[[modules:thumbs.modal.title]]",message:s,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(u.upload(t).then(()=>{u.modal.open({...f,modal:i}),Promise.all([a.e(54516),a.e(99166),a.e(47061),a.e(49775)]).then(function(){var v=[a(71431)];(S=>{S.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),r()}).apply(null,v)}).catch(a.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),u.modal.handleDelete({...f,modal:i}),u.modal.handleSort({modal:i,numThumbs:o}))})})},u.modal.handleDelete=f=>{const t=f.modal.get(0),{id:e}=f;t.addEventListener("click",i=>{i.target.closest('button[data-action="remove"]')&&d.confirm("[[modules:thumbs.modal.confirm-remove]]",o=>{if(!o)return;const r=i.target.closest("[data-id]").getAttribute("data-id"),s=i.target.closest("[data-path]").getAttribute("data-path");g.del(`/topics/${r}/thumbs`,{path:s}).then(()=>{u.modal.open(f),Promise.all([a.e(54516),a.e(99166),a.e(47061),a.e(49775)]).then(function(){var v=[a(71431)];(S=>{S.updateThumbCount(e,$(`[component="composer"][data-uuid="${e}"]`))}).apply(null,v)}).catch(a.oe)}).catch(n.error)})})},u.modal.handleSort=({modal:f,numThumbs:t})=>{if(t>1){const e=f.find(".topic-thumbs-modal");e.sortable({items:"[data-id]"}),e.on("sortupdate",u.modal.handleSortChange)}},u.modal.handleSortChange=(f,t)=>{const e=t.item.get(0).parentNode.querySelectorAll("[data-id]");Array.from(e).forEach((i,o)=>{const r=i.getAttribute("data-id");let s=i.getAttribute("data-path");s=s.replace(new RegExp(`^${config.upload_url}`),""),g.put(`/topics/${r}/thumbs/order`,{path:s,order:o}).catch(n.error)})},u}.apply(w,b),h!==void 0&&(E.exports=h)},24187:(E,w,a)=>{"use strict";var b,h;b=[a(64061)],h=function(){const g={};g.show=function(c,u){const f=c.hasOwnProperty("fileSize")&&c.fileSize!==void 0?parseInt(c.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:c.hasOwnProperty("showHelp")&&c.showHelp!==void 0?c.showHelp:!0,fileSize:f,title:c.title||"[[global:upload-file]]",description:c.description||"",button:c.button||"[[global:upload]]",accept:c.accept?c.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const e=t.find("#uploadForm");e.attr("action",c.route),e.find("#params").val(JSON.stringify(c.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),e.submit()}),e.submit(function(){return d(t,f,u),!1})})},g.hideAlerts=function(c){$(c).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function d(c,u,f){n(c,"status","[[uploads:uploading-file]]"),c.find("#upload-progress-bar").css("width","0%"),c.find("#upload-progress-box").show().removeClass("hide");const t=c.find("#fileInput");if(!t.val())return n(c,"error","[[uploads:select-file-to-upload]]");if(!m(t[0],u))return n(c,"error","[[error:file-too-big, "+u+"]]");g.ajaxSubmit(c,f)}function n(c,u,f){g.hideAlerts(c),u==="error"&&c.find("#fileUploadSubmitBtn").removeClass("disabled"),f=f.replace(/&amp;#44/g,"&#44"),c.find("#alert-"+u).translateText(f).removeClass("hide")}g.ajaxSubmit=function(c,u){c.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=l(t),n(c,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,e,i,o){c.find("#upload-progress-bar").css("width",o+"%")},success:function(t){let e=l(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(e=t.response.images),u(e[0].url),n(c,"success","[[uploads:upload-success]]"),setTimeout(function(){g.hideAlerts(c),c.modal("hide")},750)}})};function l(c){if(typeof c=="string")try{return JSON.parse(c)}catch{return{error:"[[error:parse-error]]"}}return c}function m(c,u){return window.FileReader&&u?c.files[0].size<=u*1e3:!0}return g}.apply(w,b),h!==void 0&&(E.exports=h)},12236:(E,w,a)=>{"use strict";var b,h;b=[a(49897),a(29930)],h=function(g,d){const n={};n.init=function(t,e){const i=t.find(".draft-icon"),o=t.attr("data-uuid");function r(){$(`[component="composer"][data-uuid="${o}"]`).length&&(e.save_id||(e.save_id=utils.generateSaveId(app.user.uid)),n.addToDraftList("available",e.save_id),n.addToDraftList("open",e.save_id),c(t,i,e))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(r,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(r,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(r,1e3)),t.on("itemAdded",".tags",utils.debounce(r,1e3)),t.on("thumb.uploaded",r),i.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const s=n.getList("open");s.length&&s.forEach(v=>n.removeFromDraftList("open",v))}),n.migrateGuest(),n.migrateThumbs(...arguments)};function m(t){return parseInt(t,10)>0?localStorage:sessionStorage}n.get=function(t){if(!t)return null;const e=t.split(":")[1],i=m(e);try{const o=i.getItem(t),r=JSON.parse(o)||null;if(!r)throw new Error(`can't parse draft json for ${t}`);return r.save_id=t,r.timestamp&&(r.timestampISO=utils.toISOString(r.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:r,storage:i}),r}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),n.removeFromDraftList("available"),n.removeFromDraftList("open"),null}};function c(t,e,i){if(f(app.user.uid?"localStorage":"sessionStorage")&&i&&i.save_id&&t.length){const o=t.find("input.title"),r=o&&o.length&&o.val(),s=t.find("textarea").val(),v=m(app.user.uid);if(s.length||r&&r.length){const S={save_id:i.save_id,action:i.action,text:s,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(i.action==="topics.post"){const P=t.find("input.tags").val();S.tags=P,S.title=r,S.cid=i.cid}else i.action==="posts.reply"?(S.title=i.title,S.tid=i.tid,S.toPid=i.toPid):i.action==="posts.edit"&&(S.pid=i.pid,S.title=r||i.title);app.user.uid||(S.handle=t.find("input.handle").val()),v.setItem(i.save_id,JSON.stringify(S)),$(window).trigger("action:composer.drafts.save",{storage:v,postData:i,postContainer:t}),e.toggleClass("active",!0)}else n.removeDraft(i.save_id)}}n.removeDraft=function(t){if(!t)return;n.removeFromDraftList("available",t),n.removeFromDraftList("open",t);const e=t.split(":")[1],i=m(e);i.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:i,save_id:t})},n.getList=function(t){try{const e=localStorage.getItem(`drafts:${t}`);return JSON.parse(e)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},n.addToDraftList=function(t,e){if(!f(app.user.uid?"localStorage":"sessionStorage")||!e)return;const i=n.getList(t);i.includes(e)||(i.push(e),localStorage.setItem("drafts:"+t,JSON.stringify(i)))},n.removeFromDraftList=function(t,e){if(!f(app.user.uid?"localStorage":"sessionStorage")||!e)return;const i=n.getList(t);i.includes(e)&&(i.splice(i.indexOf(e),1),localStorage.setItem("drafts:"+t,JSON.stringify(i)))},n.migrateGuest=function(){if(f("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,e=Object.keys(sessionStorage).filter(function(r){return t.test(r)}),i=new Set([]),o=e.map(function(r){const s=r.split(":");return s[1]=app.user.uid,i.add(s.join(":")),s.join(":")});return e.forEach(function(r,s){localStorage.setItem(o[s],sessionStorage.getItem(r)),sessionStorage.removeItem(r)}),i.forEach(function(r){n.addToDraftList("available",r)}),i}},n.migrateThumbs=function(t,e){if(!app.uid)return;const i=t.attr("data-uuid"),o=n.get(e.save_id);o&&o.uuid&&g.put(`/topics/${o.uuid}/thumbs`,{tid:i}).then(()=>{Promise.all([a.e(23662),a.e(65285),a.e(54516),a.e(99166),a.e(47061),a.e(11484)]).then(function(){var r=[a(71431)];(function(s){s.updateThumbCount(i,t)}).apply(null,r)}).catch(a.oe)})},n.listAvailable=function(){return n.getList("available").map(n.get).filter(Boolean)},n.getAvailableCount=function(){return n.listAvailable().length},n.open=function(t){if(!t)return;const e=n.get(t);u(t,e)},n.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=n.getList("available"),e=n.getList("open");t.length&&t.forEach(function(i){if(!i||e.includes(i))return;const o=n.get(i);if(!o||!o.text&&!o.title){n.removeFromDraftList("available",i),n.removeFromDraftList("open",i);return}u(i,o)})};function u(t,e){const o=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(o,10)&&Promise.all([a.e(23662),a.e(65285),a.e(54516),a.e(99166),a.e(47061),a.e(11484)]).then(function(){var r=[a(71431)];(function(s){e.action==="topics.post"?s.newTopic({save_id:e.save_id,cid:e.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(e.handle),title:utils.escapeHTML(e.title),body:e.text,tags:String(e.tags||"").split(",")}):e.action==="posts.reply"?g.get("/topics/"+e.tid,{},function(v,S){if(v)return d.error(v);s.newReply({save_id:e.save_id,tid:e.tid,toPid:e.toPid,title:S.title,body:e.text})}):e.action==="posts.edit"&&s.editPost({save_id:e.save_id,pid:e.pid,title:e.title?utils.escapeHTML(e.title):void 0,body:e.text})}).apply(null,r)}).catch(a.oe)}function f(t){var e;try{e=window[t];var i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(o){return o instanceof DOMException&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}return n}.apply(w,b),h!==void 0&&(E.exports=h)},91943:(E,w,a)=>{"use strict";var b,h;b=[a(89596),a(99594),a(36159),a(51916)],h=function(g,d,n,l){var m={},c={picture:function(){var e=this;e.find("#files").attr("accept","image/*").click()},upload:function(){var e=this;e.find("#files").attr("accept","").click()},thumbs:function(){m.exitFullscreen();var e=this;Promise.all([a.e(54516),a.e(99166),a.e(47061),a.e(29567)]).then(function(){var i=[a(71431)];(function(o){const r=e.get(0).getAttribute("data-uuid"),s=o.posts[r];(s.action==="topics.post"||s.action==="posts.edit"&&s.isMain)&&n.modal.open({id:r,pid:s.pid}).then(()=>{e.trigger("thumb.uploaded"),o.updateThumbCount(r,e)})}).apply(null,i)}).catch(a.oe)},tags:function(){var e=this;e.find(".tags-container").toggleClass("hidden")},zen:function(){var e=this;$(window).one("resize",function(){function i(){l.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),d.reposition(e),$(window).off("resize",i))}l.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),e.find(".write").focus(),$(window).on("resize",i),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",l.exit))}),l.toggle(e.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:e})}},u=[];m.exitFullscreen=function(){l.isEnabled&&l.isFullscreen&&l.exit()},m.addComposerButtons=function(){const e=$(".formatting-bar"),i=e.find(".formatting-group #fileForm");u.forEach(r=>{let s="";Array.isArray(r.dropdownItems)&&r.dropdownItems.length?s=t(r):s=`
					<li title="${r.title||""}">
						<button data-format="${r.name}" class="btn btn-sm btn-link text-reset position-relative" aria-label="${r.title||""}">
							<i class="${r.iconClass}"></i>
							${f(r)}
						</button>
					</li>
				`,i.before(s)}),e.find(".formatting-group>li").tooltip({container:"#content",animation:!1,trigger:"manual"}).on("mouseenter",function(r){const s=$(r.target);s.hasClass("dropdown-menu")||!!s.parents(".dropdown-menu").length||$(this).tooltip("show")}).on("click mouseleave",function(){$(this).tooltip("hide")})};function f(e){let i="";return e.badge&&(i='<span class="px-1 position-absolute top-0 start-100 translate-middle badge rounded text-bg-info"></span>'),i}function t(e){const i=e.dropdownItems.map(function(o){return`
				<li>
					<a href="#" data-format="${o.name}" class="dropdown-item rounded-1 position-relative" role="menuitem">
						<i class="${o.iconClass} text-secondary"></i> ${o.text}
						${f(o)}
					</a>
				</li>
			`});return`
			<li class="dropdown bottom-sheet" tab-index="-1" title="${e.title}">
				<button class="btn btn-sm btn-link text-reset" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="${e.title}">
					<i class="${e.iconClass}"></i>
				</button>
				<ul class="dropdown-menu p-1" role="menu">
				${i}
				</ul>
			</li>
		`}return m.addButton=function(e,i,o,r){r=r||e.replace("fa fa-",""),c[r]=i,u.push({name:r,iconClass:e,title:o})},m.addDropdown=function(e){u.push({iconClass:e.iconClass,title:e.title,dropdownItems:e.dropdownItems}),e.dropdownItems.forEach(i=>{i.name&&i.onClick&&(c[i.name]=i.onClick)})},m.getDispatchTable=function(){return c},m.addButtonDispatch=function(e,i){c[e]=i},m.addHandler=function(e){e.on("click",".formatting-bar [data-format]",function(i){var o=$(this).attr("data-format"),r=$(this).parents('[component="composer"]').find("textarea")[0];c.hasOwnProperty(o)&&(c[o].call(e,r,r.selectionStart,r.selectionEnd,i),g.render(e))})},m}.apply(w,b),h!==void 0&&(E.exports=h)},62590:(E,w,a)=>{"use strict";var b,h;b=[a(91749)],h=function(g){var d={};return d.render=function(n,l){if(l=l||function(){},!n.find(".preview-container").is(":visible"))return l();var m=n.find("textarea");socket.emit("plugins.composer.renderPreview",m.val(),function(c,u){c||(u=$("<div>"+u+"</div>"),u.find("img:not(.not-responsive)").addClass("img-fluid"),n.find(".preview").html(u),g.fire("action:composer.preview",{postContainer:n,preview:u}),l())})},d.matchScroll=function(n){if(n.find(".preview-container").is(":visible")){var l=n.find("textarea"),m=n.find(".preview");if(l.length&&m.length){var c=l[0].scrollHeight-l.height();if(c===0)return;var u=l.scrollTop()/c;m.scrollTop(Math.max(m[0].scrollHeight-m.height(),0)*u)}}},d.handleToggler=function(n){const l=n.get(0);d.env=utils.findBootstrapEnvironment();const m=["xs","sm"].includes(d.env),c=l.querySelector('.formatting-bar [data-action="preview"]'),u=c.querySelector(".show-text"),f=c.querySelector(".hide-text"),t=localStorage.getItem("composer:previewToggled"),e=config["composer-default"].hidePreviewOnOpen==="on";let i=!m&&(t===null&&!e||t==="true");const o=l.querySelector(".preview-container"),r=l.querySelector(".write-container");if(!c)return;function s(v){m?(o.classList.toggle("hide",!1),r.classList.toggle("maximized",!1),o.classList.toggle("d-none",!v),o.classList.toggle("d-flex",v),o.classList.toggle("w-100",v),r.classList.toggle("d-flex",!v),r.classList.toggle("d-none",v),r.classList.toggle("w-100",!v)):(o.classList.toggle("hide",!v),r.classList.toggle("w-50",v),r.classList.toggle("w-100",!v),localStorage.setItem("composer:previewToggled",v)),u.classList.toggle("hide",v),f.classList.toggle("hide",!v),v&&d.render(n),d.matchScroll(n)}d.toggle=s,c.addEventListener("click",v=>{v.button===0&&(i=!i,s(i))}),s(i)},d}.apply(w,b),h!==void 0&&(E.exports=h)},57904:(E,w,a)=>{"use strict";var b,h;b=[a(14063)],h=function(g){var d={},n=0,l=.3,m=.05,c=768,u=$("body"),f=$(window),t=$('[component="navbar"]');const e=document.getElementById("content");var i=t[0];function o(){return localStorage.getItem("composer:resizeRatio")||.5}function r(p){localStorage.setItem("composer:resizeRatio",Math.min(p,1))}function s(){var p;i?p=i.getBoundingClientRect():p={bottom:0};var A=Math.max(p.bottom,0),y={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return y.width=y.right,y.height=y.bottom,y.boundedTop=A,y.boundedHeight=y.bottom-A,y}function v(p,A){var y=s(),D=p[0],T=window.getComputedStyle(D),B=parseInt(T.getPropertyValue("min-height"),10),L=Math.max(B/window.innerHeight,l);if(y.width>=c){const z=(y.height-y.boundedHeight)/y.height;A=Math.min(Math.max(A,L+z),1);var O=A*y.boundedHeight/y.height;D.style.top=((1-O)*100).toString()+"%";var F=D.getBoundingClientRect();e.style.paddingBottom=(F.bottom-F.top).toString()+"px"}else D.style.top=0,e.style.paddingBottom=0;p.ratio=A,g.updateActive(p.attr("data-uuid"))}var S=v,P=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return P&&(S=function(p,A){P(function(){v(p,A),setTimeout(function(){f.trigger("action:composer.resize"),p.trigger("action:composer.resize")},0)})}),d.reposition=function(p){var A=o();A>=1-m&&(A=1,p.addClass("maximized")),S(p,A)},d.maximize=function(p,A){A?S(p,1):d.reposition(p)},d.handleResize=function(p){var A=0,y=0,D=0,T=p.find(".resizer"),B=T[0];function L(x){var C=B.getBoundingClientRect(),R=(C.top+C.bottom)/2;A=(R-x.clientY)/2,y=x.clientY,f.on("mousemove",O),f.on("mouseup",F),u.on("touchmove",z)}function O(x){var C=x.clientY-A,R=s(),I=(R.height-C)/R.boundedHeight;S(p,I)}function F(x){x.preventDefault(),D=x.clientY,p.find("textarea").focus(),f.off("mousemove",O),f.off("mouseup",F),u.off("touchmove",z);var C=D-A,R=s(),I=(R.height-C)/R.boundedHeight;D-y===0&&p.hasClass("maximized")?(p.removeClass("maximized"),I=!n||n>=1-m?.5:n,S(p,I)):D-y===0||I>=1-m?(S(p,1),p.addClass("maximized"),n=I):p.removeClass("maximized"),r(I)}function z(x){x.preventDefault(),O(x.touches[0])}T.on("mousedown",function(x){x.button===0&&(x.preventDefault(),L(x))}).on("touchstart",function(x){x.preventDefault(),L(x.touches[0])}).on("touchend",F)},d}.apply(w,b),h!==void 0&&(E.exports=h)},51916:E=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var w=typeof window<"u"&&typeof window.document<"u"?window.document:{},a=E.exports,b=function(){for(var d,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,m=n.length,c={};l<m;l++)if(d=n[l],d&&d[1]in w){for(l=0;l<d.length;l++)c[n[0][l]]=d[l];return c}return!1}(),h={change:b.fullscreenchange,error:b.fullscreenerror},g={request:function(d,n){return new Promise(function(l,m){var c=function(){this.off("change",c),l()}.bind(this);this.on("change",c),d=d||w.documentElement;var u=d[b.requestFullscreen](n);u instanceof Promise&&u.then(c).catch(m)}.bind(this))},exit:function(){return new Promise(function(d,n){if(!this.isFullscreen){d();return}var l=function(){this.off("change",l),d()}.bind(this);this.on("change",l);var m=w[b.exitFullscreen]();m instanceof Promise&&m.then(l).catch(n)}.bind(this))},toggle:function(d,n){return this.isFullscreen?this.exit():this.request(d,n)},onchange:function(d){this.on("change",d)},onerror:function(d){this.on("error",d)},on:function(d,n){var l=h[d];l&&w.addEventListener(l,n,!1)},off:function(d,n){var l=h[d];l&&w.removeEventListener(l,n,!1)},raw:b};if(!b){a?E.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(g,{isFullscreen:{get:function(){return!!w[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return w[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!w[b.fullscreenEnabled]}}}),a?E.exports=g:window.screenfull=g})()}}]);
