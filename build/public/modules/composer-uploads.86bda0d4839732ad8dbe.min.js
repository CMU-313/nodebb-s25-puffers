(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[50350,99127,34271,69185,86198,1091,25764,6232,33069,33085,49897],{49897:(b,D,u)=>{"use strict";u.r(D),u.d(D,{del:()=>r,get:()=>t,head:()=>s,patch:()=>e,post:()=>m,put:()=>i});var E=u(91749),y=u.n(E),C=u(40027),h=u.n(C);const a=config.relative_path+"/api/v3";async function o(n,l){if(n.url=n.url.startsWith("/api")?config.relative_path+n.url:a+n.url,typeof l=="function"){c(n).then(d=>l(null,d),d=>l(d));return}try{return await c(n)}catch(d){if(d.message==="A valid login session was not found. Please log in and try again."){const{url:p}=await(0,E.fire)("filter:admin.reauth",{url:"login"});return(0,C.confirm)("[[error:api.reauth-required]]",k=>{k&&ajaxify.go(p)})}throw d}}async function c(n){const{url:l}=n;delete n.url,n.data&&!(n.data instanceof FormData)&&(n.data=JSON.stringify(n.data||{}),n.headers["content-type"]="application/json; charset=utf-8"),{options:n}=await(0,E.fire)("filter:api.options",{options:n}),n.data&&(n.body=n.data,delete n.data);const d=await fetch(l,n),{headers:p}=d,k=p.get("content-type"),f=k&&k.startsWith("application/json");let g;if(n.method!=="HEAD"&&(f?g=await d.json():g=await d.text()),!d.ok)throw g?new Error(f?g.status.message:g):new Error(d.statusText);return f&&g&&g.hasOwnProperty("status")&&g.hasOwnProperty("response")?g.response:g}function t(n,l,d){return o({url:n+(l&&Object.keys(l).length?"?"+$.param(l):"")},d)}function s(n,l,d){return o({url:n+(l&&Object.keys(l).length?"?"+$.param(l):""),method:"HEAD"},d)}function m(n,l,d){return o({url:n,method:"POST",data:l,headers:{"x-csrf-token":config.csrf_token}},d)}function e(n,l,d){return o({url:n,method:"PATCH",data:l,headers:{"x-csrf-token":config.csrf_token}},d)}function i(n,l,d){return o({url:n,method:"PUT",data:l,headers:{"x-csrf-token":config.csrf_token}},d)}function r(n,l,d){return o({url:n,method:"DELETE",data:l,headers:{"x-csrf-token":config.csrf_token}},d)}},96349:(b,D,u)=>{"use strict";var E,y;E=[u(29930),u(89336),u(49897)],y=function(C,h,a){const o={};return o.init=function(c,t){let s=null;t=t||{},t.privilege=t.privilege||"topics:read",t.states=t.states||["watching","tracking","notwatching","ignoring"],t.cacheList=t.hasOwnProperty("cacheList")?t.cacheList:!0;let m=[];Array.isArray(t.localCategories)&&(m=t.localCategories.map(l=>({...l}))),t.selectedCids=t.selectedCids||ajaxify.data.selectedCids||[];const e=c.find('[component="category-selector-search"]');if(!e.length)return;const i=e.parent('[component="category/dropdown"]').length>0||e.parent('[component="category-selector"]').length>0;c.on("show.bs.dropdown",function(){i&&(c.find(".dropdown-toggle").css({visibility:"hidden"}),e.removeClass("hidden"),e.css({"z-index":c.find(".dropdown-toggle").css("z-index")+1}));function l(){const d=e.find("input").val();d.length>1||!d&&!s?r(d,function(p){s=t.cacheList&&(s||p),n(p)}):!d&&s&&n(s)}e.on("click",function(d){d.preventDefault(),d.stopPropagation()}),e.find("input").val("").on("keyup",utils.debounce(l,300)),l()}),c.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||e.find("input").focus()}),c.on("hide.bs.dropdown",function(){i&&(c.find(".dropdown-toggle").css({visibility:"inherit"}),e.addClass("hidden")),e.off("click"),e.find("input").off("keyup")});function r(l,d){a.get("/search/categories",{search:l,query:utils.params(),parentCid:t.parentCid||0,selectedCids:t.selectedCids,privilege:t.privilege,states:t.states,showLinks:t.showLinks},function(p,{categories:k}){if(p)return C.error(p);d(m.concat(k))})}function n(l){const d=t.selectedCids.map(String);l.forEach(function(p){p.selected=d.includes(String(p.cid))}),app.parseAndTranslate(t.template,{categoryItems:l.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(p){c.find('[component="category/list"]').html(p.find('[component="category/list"]').html()),c.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!l.length);const k=h.Dropdown.getInstance(c.find(".dropdown-toggle").get(0));k&&k.update()})}},o}.apply(D,E),y!==void 0&&(b.exports=y)},65348:(b,D,u)=>{"use strict";var E,y;E=[u(96349),u(40027),u(91749),u(17459)],y=function(C,h,a,o){const c={};return c.init=function(t,s){if(!t||!t.length)return;s=s||{};const m=s.onSelect||function(){};s.states=s.states||["watching","tracking","notwatching","ignoring"],s.template=s.template||"partials/category/selector-dropdown-left",a.fire("action:category.selector.options",{el:t,options:s}),C.init(t,s);const e={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const r=$(this);return r.hasClass("disabled")?!1:(e.selectCategory(r.attr("data-cid")),m(e.selectedCategory))});let i=e.el.find('[component="category-selector-selected"]').html();return o.translate(i,r=>{i=r}),e.selectCategory=function(r){const n=e.el.find('[data-cid="'+r+'"]');e.selectedCategory={cid:r,name:n.attr("data-name")},n.length?e.el.find('[component="category-selector-selected"]').html(n.find('[component="category-markup"]').html()):e.el.find('[component="category-selector-selected"]').html(i)},e.getSelectedCategory=function(){return e.selectedCategory},e.getSelectedCid=function(){return e.selectedCategory?e.selectedCategory.cid:0},s.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(s.template,{selectedCategory:s.selectedCategory},function(r){e.el.find('[component="category-selector-selected"]').html(r.find('[component="category-selector-selected"]').html())}),e},c.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(s){const m=h.dialog({title:t.title||"[[modules:composer.select-category]]",message:s,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:i}}}),e=c.init(m.find('[component="category-selector"]'),t);function i(r){return r.preventDefault(),e.selectedCategory&&(t.onSubmit(e.selectedCategory),m.modal("hide")),!1}t.openOnLoad&&m.on("shown.bs.modal",function(){m.find(".dropdown-toggle").dropdown("toggle")}),m.find("form").on("submit",i)})},c}.apply(D,E),y!==void 0&&(b.exports=y)},13342:(b,D,u)=>{b.exports=u(41644)},89596:(b,D,u)=>{b.exports=u(62590)},31494:(b,D,u)=>{b.exports=u(36244)},14063:(b,D,u)=>{"use strict";b=u.nmd(b);var E,y;E=[u(17459),u(91749)],y=function(C,h){const a={};let o=!1;a.init=function(){if(a.taskbar=$('[component="taskbar"]'),a.tasklist=a.taskbar.find("ul"),!a.taskbar.length||!a.tasklist.length){o=!0;return}a.taskbar.on("click","li",async function(){const e=$(this),i=e.attr("data-module"),r=e.attr("data-uuid"),n=await app.require(i);return e.hasClass("active")?n.minimize(r):(t(),n.load(r),a.toggleNew(r,!1),a.tasklist.removeClass("active"),e.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){a.closeAll()})},a.close=async function(e,i){if(o)return;if(a.tasklist.find('[data-module="'+b+'"][data-uuid="'+i+'"]').length){const n=await app.require(e);n&&typeof n.close=="function"&&n.close(i)}},a.closeAll=function(e){if(o)return;let i="[data-uuid]";e&&(i='[data-module="'+e+'"]'+i),a.tasklist.find(i).each(function(r,n){a.close(e||n.getAttribute("data-module"),n.getAttribute("data-uuid"))})},a.discard=function(e,i){if(o)return;a.tasklist.find('[data-module="'+e+'"][data-uuid="'+i+'"]').remove(),c()},a.push=function(e,i,r,n){if(n=n||function(){},o)return n();const l=a.tasklist.find('li[data-uuid="'+i+'"]'),d={module:e,uuid:i,options:r,element:l};h.fire("filter:taskbar.push",d),!l.length&&d.module?s(d,n):n(l)},a.get=function(e){return o?[]:$('[data-module="'+e+'"]').map(function(r,n){return $(n).data()})},a.minimize=function(e,i){if(o)return;a.tasklist.find('[data-module="'+e+'"][data-uuid="'+i+'"]').toggleClass("active",!1)},a.toggleNew=function(e,i,r){if(o)return;a.tasklist.find('[data-uuid="'+e+'"]').toggleClass("new",i),r||h.fire("action:taskbar.toggleNew",e)},a.updateActive=function(e){if(o)return;const i=a.tasklist.find("li");i.removeClass("active"),i.filter('[data-uuid="'+e+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+e+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},a.isActive=function(e){return o?!1:a.tasklist.find('li[data-uuid="'+e+'"]').hasClass("active")};function c(){if(o)return;a.tasklist.find("li").length>0?a.taskbar.attr("data-active","1"):a.taskbar.removeAttr("data-active")}function t(){o||a.tasklist.find(".active").removeClass("active")}function s(e,i){if(o)return i();C.translate(e.options.title,function(r){const n=$("<div></div>").text(r||"NodeBB Task").html(),l=$("<li></li>").addClass(e.options.className).html('<a href="#"'+(e.options.image?` style="background-image: url('`+e.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(e.options.icon?'<i class="fa '+e.options.icon+'"></i> ':"")+'<span aria-label="'+n+'" component="taskbar/title">'+n+"</span></a>").attr({title:n,"data-module":e.module,"data-uuid":e.uuid}).addClass(e.options.state!==void 0?e.options.state:"active");(!e.options.state||e.options.state==="active")&&t(),a.tasklist.append(l),c(),e.element=l,l.data(e),h.fire("action:taskbar.pushed",e),i(l)})}const m=function(e,i,r){switch(i){case"title":e.find('[component="taskbar/title"]').text(r);break;case"icon":e.find("i").attr("class","fa fa-"+r);break;case"image":e.find("a").css("background-image",r?'url("'+r.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":e.find("a").css("background-color",r);break;case"color":e.find("a").css("color",r);break}};return a.update=function(e,i,r){if(o)return;const n=a.tasklist.find('[data-module="'+e+'"][data-uuid="'+i+'"]');if(!n.length)return;const l=n.data();Object.keys(r).forEach(function(d){l[d]=r[d],m(n,d,r[d])}),n.data(l)},a}.apply(D,E),y!==void 0&&(b.exports=y)},43103:(b,D,u)=>{"use strict";var E,y;E=[u(29930)],y=function(C){const h={};return h.init=function(a){const o=a.uploadFormEl;if(o.length&&(o.attr("action",config.relative_path+a.route),a.dragDropAreaEl&&h.handleDragDrop({container:a.dragDropAreaEl,callback:function(c){h.ajaxSubmit({uploadForm:o,upload:c,callback:a.callback})}}),a.pasteEl&&h.handlePaste({container:a.pasteEl,callback:function(c){h.ajaxSubmit({uploadForm:o,upload:c,callback:a.callback})}}),a.uploadBtnEl)){const c=o.find('input[name="files[]"]');a.uploadBtnEl.on("click",function(){c.trigger("click")}),c.on("change",function(t){const s=(t.target||{}).files||($(this).val()?[{name:$(this).val(),type:utils.fileMimeType($(this).val())}]:null);s&&h.ajaxSubmit({uploadForm:o,upload:{files:s,fileNames:Array.from(s).map(m=>m.name)},callback:a.callback})})}},h.handleDragDrop=function(a){let o=!1;const c=a.container,t=a.container.find(".imagedrop");c.on("dragenter",function(){o||(t.css("top","0px"),t.css("height",c.height()+"px"),t.css("line-height",c.height()+"px"),t.show(),t.on("dragleave",function(){t.hide(),t.off("dragleave")}))}),t.on("drop",function(e){e.preventDefault();const i=e.originalEvent.dataTransfer.files;if(i.length){let n;if(window.FormData){n=new FormData;for(var r=0;r<i.length;++r)n.append("files[]",i[r],i[r].name)}a.callback({files:i,formData:n})}return t.hide(),!1});function s(m){return m.preventDefault(),!1}$(document).off("dragstart").on("dragstart",function(){o=!0}).off("dragend").on("dragend, mouseup",function(){o=!1}),t.on("dragover",s),t.on("dragenter",s)},h.handlePaste=function(a){a.container.on("paste",function(c){const t=(c.clipboardData||c.originalEvent.clipboardData||{}).items,s=[],m=[];let e=null;window.FormData&&(e=new FormData),[].forEach.call(t,function(i){const r=i.getAsFile();if(r){const n=utils.generateUUID()+"-"+r.name;e&&e.append("files[]",r,n),s.push(r),m.push(n)}}),s.length&&a.callback({files:s,fileNames:m,formData:e})})},h.ajaxSubmit=function(a){const o=[...a.upload.files];for(let t=0;t<o.length;++t){const s=o[t].type.match(/image./);if(s&&!app.user.privileges["upload:post:image"]||!s&&!app.user.privileges["upload:post:file"])return C.error("[[error:no-privileges]]");if(!app.user.isAdmin&&o[t].size>parseInt(config.maximumFileSize,10)*1024)return a.uploadForm[0].reset(),C.error("[[error:file-too-big, "+config.maximumFileSize+"]]")}const c=Date.now();a.uploadForm.off("submit").on("submit",function(){return $(this).ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},resetForm:!0,clearForm:!0,formData:a.upload.formData,error:function(t){let s=t.responseJSON&&(t.responseJSON.error||t.responseJSON.status&&t.responseJSON.status.message)||"[[error:parse-error]]";t&&t.status===413&&(s=t.statusText||"Request Entity Too Large"),C.error(s),C.remove(c)},uploadProgress:function(t,s,m,e){C.alert({alert_id:c,message:"[[modules:composer.uploading, "+e+"%]]"})},success:function(t){const s=t.response.images;if(s&&s.length)for(var m=0;m<s.length;++m)s[m].filename=o[m].name,s[m].isImage=/image./.test(o[m].type);a.callback(s)},complete:function(){a.uploadForm[0].reset(),setTimeout(C.remove,100,c)}}),!1}),a.uploadForm.submit()},h}.apply(D,E),y!==void 0&&(b.exports=y)},41644:(b,D,u)=>{"use strict";var E,y;E=[u(65348),u(14063),u(49897)],y=function(C,h,a){var o={},c;o.init=function(e,i){var r=e.find(".category-list-container");r.length&&(e.on("action:composer.resize",function(){t(e)}),o.updateTaskbar(e,i),c=C.init(r.find('[component="category-selector"]'),{privilege:"topics:create",states:["watching","tracking","notwatching","ignoring"],onSelect:function(n){i.hasOwnProperty("cid")&&m(e,i,n)}}),c&&(i.cid&&i.category?c.selectedCategory={cid:i.cid,name:i.category.name}:ajaxify.data.template.compose&&ajaxify.data.selectedCategory&&(c.selectedCategory={cid:ajaxify.data.cid,name:ajaxify.data.selectedCategory}),e.find(".category-name").translateHtml(c.selectedCategory?c.selectedCategory.name:"[[modules:composer.select-category]]").on("click",function(){C.modal({privilege:"topics:create",states:["watching","tracking","notwatching","ignoring"],openOnLoad:!0,showLinks:!1,onSubmit:function(n){e.find(".category-name").text(n.name),c.selectCategory(n.cid),i.hasOwnProperty("cid")&&m(e,i,n)}})}),t(e)))};function t(e){e.find('.category-list-container [component="category-selector"]').toggleClass("dropup",e.outerHeight()<$(window).height()/2)}o.getSelectedCid=function(){var e;return c&&(e=c.getSelectedCategory()),e?e.cid:0},o.updateTaskbar=function(e,i){parseInt(i.cid,10)&&a.get(`/categories/${i.cid}`,{}).then(function(r){s(e,r)})};function s(e,i){if(i){var r=e.attr("data-uuid");h.update("composer",r,{image:i.backgroundImage,color:i.color,"background-color":i.bgColor,icon:i.icon&&i.icon.slice(3)})}}async function m(e,i,r){i.cid=r.cid;const n=await window.fetch(`${config.relative_path}/api/category/${r.cid}`).then(l=>l.json());i.category=n,s(e,n),u.e(56382).then(function(){var l=[u(72573),u(52543),u(92762)];(function(d,p,k){d.onChangeCategory(n),p.onChangeCategory(e,i,r.cid,n),k.onChangeCategory(e,i),$(window).trigger("action:composer.changeCategory",{postContainer:e,postData:i,selectedCategory:r,categoryData:n})}).apply(null,l)}).catch(u.oe)}return o}.apply(D,E),y!==void 0&&(b.exports=y)},62590:(b,D,u)=>{"use strict";var E,y;E=[u(91749)],y=function(C){var h={};return h.render=function(a,o){if(o=o||function(){},!a.find(".preview-container").is(":visible"))return o();var c=a.find("textarea");socket.emit("plugins.composer.renderPreview",c.val(),function(t,s){t||(s=$("<div>"+s+"</div>"),s.find("img:not(.not-responsive)").addClass("img-fluid"),a.find(".preview").html(s),C.fire("action:composer.preview",{postContainer:a,preview:s}),o())})},h.matchScroll=function(a){if(a.find(".preview-container").is(":visible")){var o=a.find("textarea"),c=a.find(".preview");if(o.length&&c.length){var t=o[0].scrollHeight-o.height();if(t===0)return;var s=o.scrollTop()/t;c.scrollTop(Math.max(c[0].scrollHeight-c.height(),0)*s)}}},h.handleToggler=function(a){const o=a.get(0);h.env=utils.findBootstrapEnvironment();const c=["xs","sm"].includes(h.env),t=o.querySelector('.formatting-bar [data-action="preview"]'),s=t.querySelector(".show-text"),m=t.querySelector(".hide-text"),e=localStorage.getItem("composer:previewToggled"),i=config["composer-default"].hidePreviewOnOpen==="on";let r=!c&&(e===null&&!i||e==="true");const n=o.querySelector(".preview-container"),l=o.querySelector(".write-container");if(!t)return;function d(p){c?(n.classList.toggle("hide",!1),l.classList.toggle("maximized",!1),n.classList.toggle("d-none",!p),n.classList.toggle("d-flex",p),n.classList.toggle("w-100",p),l.classList.toggle("d-flex",!p),l.classList.toggle("d-none",p),l.classList.toggle("w-100",!p)):(n.classList.toggle("hide",!p),l.classList.toggle("w-50",p),l.classList.toggle("w-100",!p),localStorage.setItem("composer:previewToggled",p)),s.classList.toggle("hide",p),m.classList.toggle("hide",!p),p&&h.render(a),h.matchScroll(a)}h.toggle=d,t.addEventListener("click",p=>{p.button===0&&(r=!r,d(r))}),d(r)},h}.apply(D,E),y!==void 0&&(b.exports=y)},36244:(b,D,u)=>{"use strict";var E,y;E=[u(89596),u(13342),u(17459),u(29930),u(43103),u(64061)],y=function(C,h,a,o,c){var t={inProgress:{}},s="";t.initialize=function(f){r(f),n(f),m(f),e(f),a.translate("[[modules:composer.uploading, 0%]]",function(g){s=g})};function m(f){var g=$('.composer[data-uuid="'+f+'"]');g.find("#files").on("change",function(v){var w=(v.target||{}).files||($(this).val()?[{name:$(this).val(),type:utils.fileMimeType($(this).val())}]:null);w&&p({files:w,post_uuid:f,route:"/api/post/upload"})})}function e(f){var g=$('.composer[data-uuid="'+f+'"]');g.on("click",".topic-thumb-clear-btn",function(v){g.find("input#topic-thumb-url").val("").trigger("change"),i(g.find("input#topic-thumb-file")),$(this).addClass("hide"),v.preventDefault()}),g.on("paste change keypress","input#topic-thumb-url",function(){var v=$(this);setTimeout(function(){var w=v.val();w?g.find(".topic-thumb-clear-btn").removeClass("hide"):(i(g.find("input#topic-thumb-file")),g.find(".topic-thumb-clear-btn").addClass("hide")),g.find("img.topic-thumb-preview").attr("src",w)},100)})}function i(f){f.wrap("<form />").closest("form").get(0).reset(),f.unwrap()}function r(f){var g=$('.composer[data-uuid="'+f+'"]');c.handleDragDrop({container:g,callback:function(v){p({files:v.files,post_uuid:f,route:"/api/post/upload",formData:v.formData})}})}function n(f){var g=$('.composer[data-uuid="'+f+'"]');c.handlePaste({container:g,callback:function(v){p({files:v.files,fileNames:v.fileNames,post_uuid:f,route:"/api/post/upload",formData:v.formData})}})}function l(f){return f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function d(f,g,v){return f.slice(0,g)+v+f.slice(g)}function p(f){var g=[...f.files],v=f.post_uuid,w=$('.composer[data-uuid="'+v+'"]'),_=w.find("textarea"),O=_.val(),F=w.find("#fileForm"),B=!1;F.attr("action",config.relative_path+f.route);var R=h.getSelectedCid();!R&&ajaxify.data.cid&&(R=ajaxify.data.cid);var x=0,L=!1;for(x=0;x<g.length;++x)if(L=g[x].type.match(/image./),L&&!app.user.privileges["upload:post:image"]||!L&&!app.user.privileges["upload:post:file"])return o.error("[[error:no-privileges]]");var T=[];let U="";for(x=0;x<g.length;++x){if(T.push(x+"_"+Date.now()+"_"+(f.fileNames?f.fileNames[x]:g[x].name)),L=g[x].type.match(/image./),!app.user.isAdmin&&g[x].size>parseInt(config.maximumFileSize,10)*1024)return F[0].reset(),o.error("[[error:file-too-big, "+config.maximumFileSize+"]]");U+=(L?"!":"")+"["+T[x]+"]("+s+") "}const W=_.getCursorPosition(),K=O.length;O=d(O,W,U),F.length&&w.find('[data-action="post"]').prop("disabled",!0),_.val(O),$(window).trigger("action:composer.uploadStart",{post_uuid:v,files:T.map(function(N,P){return{filename:N.replace(/^\d+_\d{13}_/,""),isImage:/image./.test(g[P].type)}}),text:s}),F.off("submit").submit(function(){function N(P,S,A){var M;A&&(M=P.replace(/^\d+_\d{13}_/,""));var j=_.val(),I=new RegExp(l(P)+"]\\([^)]+\\)","g");_.val(j.replace(I,(M||P)+"]("+S+")")),$(window).trigger("action:composer.uploadUpdate",{post_uuid:v,filename:P,text:S})}return t.inProgress[v]=t.inProgress[v]||[],t.inProgress[v].push(1),f.formData&&f.formData.append("cid",R),$(this).ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},resetForm:!0,clearForm:!0,formData:f.formData,data:{cid:R},error:function(P){B=!0,w.find('[data-action="post"]').prop("disabled",!1);const S=k(P,v);for(var A=0;A<g.length;++A)N(T[A],S,!0);C.render(w)},uploadProgress:function(P,S,A,M){a.translate("[[modules:composer.uploading, "+M+"%]]",function(j){if(!B)for(var I=0;I<g.length;++I)N(T[I],j)})},success:function(P){const S=P.response.images;if(B=!0,S&&S.length)for(var A=0;A<S.length;++A)S[A].filename=T[A].replace(/^\d+_\d{13}_/,""),S[A].isImage=/image./.test(g[A].type),N(T[A],S[A].url,!0);C.render(w),_.prop("selectionEnd",W+_.val().length-K),_.focus(),w.find('[data-action="post"]').prop("disabled",!1),$(window).trigger("action:composer.upload",{post_uuid:v,files:S})},complete:function(){F[0].reset(),t.inProgress[v].pop()}}),!1}),F.submit()}function k(f,g){var v=f.responseJSON&&(f.responseJSON.error||f.responseJSON.status&&f.responseJSON.status.message)||"[[error:parse-error]]";return f&&f.status===413&&(v=f.statusText||"Request Entity Too Large"),o.error(v),$(window).trigger("action:composer.uploadError",{post_uuid:g,message:v}),v}return t}.apply(D,E),y!==void 0&&(b.exports=y)}}]);
