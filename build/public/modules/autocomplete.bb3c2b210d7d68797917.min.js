"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,13417,34271,34405,49897,99127],{34405:(D,g,l)=>{var h,y;h=[l(49897),l(29930)],y=function(E,p){const f={},d={delay:200,appendTo:null};f.init=i=>{const a={...d,...i},{input:o,onSelect:c}=a;app.loadJQueryUI(function(){o.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(r,u){_(o,c,r,u)}})})},f.user=function(i,a,o){typeof a=="function"&&(o=a,a={}),a=a||{},f.init({input:i,onSelect:o,source:(c,r)=>{a.query=c.term,E.get("/api/users",a,function(u,t){if(u)return p.error(u);if(t&&t.users){const n=t.users.map(function(e){const m=$("<div></div>").html(e.username).text();return e&&{label:m,value:m,user:{uid:e.uid,name:e.username,slug:e.userslug,username:e.username,userslug:e.userslug,picture:e.picture,banned:e.banned,"icon:text":e["icon:text"],"icon:bgColor":e["icon:bgColor"]}}});r(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},f.group=function(i,a){f.init({input:i,onSelect:a,source:(o,c)=>{socket.emit("groups.search",{query:o.term},function(r,u){if(r)return p.error(r);if(u&&u.length){const t=u.map(function(n){return n&&{label:n.name,value:n.name,group:n}});c(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},f.tag=function(i,a){f.init({input:i,onSelect:a,delay:100,source:(o,c)=>{socket.emit("topics.autocompleteTags",{query:o.term,cid:ajaxify.data.cid||0},function(r,u){if(r)return p.error(r);u&&c(u),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function _(i,a,o,c){a=a||function(){};const r=jQuery.Event("keypress");r.which=13,r.keyCode=13,setTimeout(function(){i.trigger(r)},100),a(o,c)}return f}.apply(g,h),y!==void 0&&(D.exports=y)},49897:(D,g,l)=>{l.r(g),l.d(g,{del:()=>u,get:()=>i,head:()=>a,patch:()=>c,post:()=>o,put:()=>r});var h=l(91749),y=l.n(h),E=l(40027),p=l.n(E);const f=config.relative_path+"/api/v3";async function d(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:f+t.url,typeof n=="function"){_(t).then(e=>n(null,e),e=>n(e));return}try{return await _(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:m}=await(0,h.fire)("filter:admin.reauth",{url:"login"});return(0,E.confirm)("[[error:api.reauth-required]]",x=>{x&&ajaxify.go(m)})}throw e}}async function _(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,h.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:m}=e,x=m.get("content-type"),P=x&&x.startsWith("application/json");let s;if(t.method!=="HEAD"&&(P?s=await e.json():s=await e.text()),!e.ok)throw s?new Error(P?s.status.message:s):new Error(e.statusText);return P&&s&&s.hasOwnProperty("status")&&s.hasOwnProperty("response")?s.response:s}function i(t,n,e){return d({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function a(t,n,e){return d({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},e)}function o(t,n,e){return d({url:t,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function c(t,n,e){return d({url:t,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function r(t,n,e){return d({url:t,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function u(t,n,e){return d({url:t,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
