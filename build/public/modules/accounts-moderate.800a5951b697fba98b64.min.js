"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,42289,49897,99127],{28061:(O,m,o)=>{var i,y;i=[o(81335),o(49897),o(40027),o(29930)],y=function(E,d,A,s){const l={};l.banAccount=function(r,a){r=r||ajaxify.data.theirid,h({tpl:"modals/temporary-ban",title:"[[user:ban-account]]",onSubmit:function(u){const f=u.length>0?Date.now()+u.length*1e3*60*60*(parseInt(u.unit,10)?24:1):0;d.put("/users/"+r+"/ban",{until:f,reason:u.reason||""}).then(()=>{if(typeof a=="function")return a();ajaxify.refresh()}).catch(s.error)}})},l.unbanAccount=function(r){h({tpl:"modals/unban",title:"[[user:unban-account]]",onSubmit:function(a){d.del("/users/"+r+"/ban",{reason:a.reason||""}).then(()=>{ajaxify.refresh()}).catch(s.error)}})},l.muteAccount=function(r,a){r=r||ajaxify.data.theirid,h({tpl:"modals/temporary-mute",title:"[[user:mute-account]]",onSubmit:function(u){const f=u.length>0?Date.now()+u.length*1e3*60*60*(parseInt(u.unit,10)?24:1):0;d.put("/users/"+r+"/mute",{until:f,reason:u.reason||""}).then(()=>{if(typeof a=="function")return a();ajaxify.refresh()}).catch(s.error)}})},l.unmuteAccount=function(r){h({tpl:"modals/unmute",title:"[[user:unmute-account]]",onSubmit:function(a){d.del("/users/"+r+"/mute",{reason:a.reason||""}).then(()=>{ajaxify.refresh()}).catch(s.error)}})};function h(r){E.render(r.tpl,{}).then(function(a){const u=A.dialog({title:r.title,message:a,show:!0,onEscape:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:r.title,callback:function(){const f=u.find("form").serializeArray().reduce(function(g,t){return g[t.name]=t.value,g},{});r.onSubmit(f)}}}})})}return l}.apply(m,i),y!==void 0&&(O.exports=y)},49897:(O,m,o)=>{o.r(m),o.d(m,{del:()=>g,get:()=>h,head:()=>r,patch:()=>u,post:()=>a,put:()=>f});var i=o(91749),y=o.n(i),E=o(40027),d=o.n(E);const A=config.relative_path+"/api/v3";async function s(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:A+t.url,typeof n=="function"){l(t).then(e=>n(null,e),e=>n(e));return}try{return await l(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:x}=await(0,i.fire)("filter:admin.reauth",{url:"login"});return(0,E.confirm)("[[error:api.reauth-required]]",b=>{b&&ajaxify.go(x)})}throw e}}async function l(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,i.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:x}=e,b=x.get("content-type"),P=b&&b.startsWith("application/json");let c;if(t.method!=="HEAD"&&(P?c=await e.json():c=await e.text()),!e.ok)throw c?new Error(P?c.status.message:c):new Error(e.statusText);return P&&c&&c.hasOwnProperty("status")&&c.hasOwnProperty("response")?c.response:c}function h(t,n,e){return s({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function r(t,n,e){return s({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},e)}function a(t,n,e){return s({url:t,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function u(t,n,e){return s({url:t,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function f(t,n,e){return s({url:t,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function g(t,n,e){return s({url:t,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
