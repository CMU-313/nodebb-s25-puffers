"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,99127],{49897:(D,l,a)=>{a.r(l),a.d(l,{del:()=>P,get:()=>g,head:()=>E,patch:()=>O,post:()=>y,put:()=>m});var f=a(91749),w=a.n(f),h=a(40027),k=a.n(h);const d=config.relative_path+"/api/v3";async function s(t,r){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:d+t.url,typeof r=="function"){i(t).then(e=>r(null,e),e=>r(e));return}try{return await i(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:o}=await(0,f.fire)("filter:admin.reauth",{url:"login"});return(0,h.confirm)("[[error:api.reauth-required]]",u=>{u&&ajaxify.go(o)})}throw e}}async function i(t){const{url:r}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,f.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(r,t),{headers:o}=e,u=o.get("content-type"),c=u&&u.startsWith("application/json");let n;if(t.method!=="HEAD"&&(c?n=await e.json():n=await e.text()),!e.ok)throw n?new Error(c?n.status.message:n):new Error(e.statusText);return c&&n&&n.hasOwnProperty("status")&&n.hasOwnProperty("response")?n.response:n}function g(t,r,e){return s({url:t+(r&&Object.keys(r).length?"?"+$.param(r):"")},e)}function E(t,r,e){return s({url:t+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"HEAD"},e)}function y(t,r,e){return s({url:t,method:"POST",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function O(t,r,e){return s({url:t,method:"PATCH",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function m(t,r,e){return s({url:t,method:"PUT",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function P(t,r,e){return s({url:t,method:"DELETE",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
