(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,4644,6232,18732,33069,34271,49897,62441,86706,88189,98463,99127],{449:(E,w,d)=>{E.exports=d(91943)},14063:(E,w,d)=>{"use strict";E=d.nmd(E);var p,h;p=[d(17459),d(91749)],h=function(v,m){const i={};let a=!1;i.init=function(){if(i.taskbar=$('[component="taskbar"]'),i.tasklist=i.taskbar.find("ul"),!i.taskbar.length||!i.tasklist.length){a=!0;return}i.taskbar.on("click","li",async function(){const e=$(this),t=e.attr("data-module"),o=e.attr("data-uuid"),n=await app.require(t);return e.hasClass("active")?n.minimize(o):(r(),n.load(o),i.toggleNew(o,!1),i.tasklist.removeClass("active"),e.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){i.closeAll()})},i.close=async function(e,t){if(a)return;if(i.tasklist.find('[data-module="'+E+'"][data-uuid="'+t+'"]').length){const n=await app.require(e);n&&typeof n.close=="function"&&n.close(t)}},i.closeAll=function(e){if(a)return;let t="[data-uuid]";e&&(t='[data-module="'+e+'"]'+t),i.tasklist.find(t).each(function(o,n){i.close(e||n.getAttribute("data-module"),n.getAttribute("data-uuid"))})},i.discard=function(e,t){if(a)return;i.tasklist.find('[data-module="'+e+'"][data-uuid="'+t+'"]').remove(),u()},i.push=function(e,t,o,n){if(n=n||function(){},a)return n();const l=i.tasklist.find('li[data-uuid="'+t+'"]'),c={module:e,uuid:t,options:o,element:l};m.fire("filter:taskbar.push",c),!l.length&&c.module?s(c,n):n(l)},i.get=function(e){return a?[]:$('[data-module="'+e+'"]').map(function(o,n){return $(n).data()})},i.minimize=function(e,t){if(a)return;i.tasklist.find('[data-module="'+e+'"][data-uuid="'+t+'"]').toggleClass("active",!1)},i.toggleNew=function(e,t,o){if(a)return;i.tasklist.find('[data-uuid="'+e+'"]').toggleClass("new",t),o||m.fire("action:taskbar.toggleNew",e)},i.updateActive=function(e){if(a)return;const t=i.tasklist.find("li");t.removeClass("active"),t.filter('[data-uuid="'+e+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+e+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},i.isActive=function(e){return a?!1:i.tasklist.find('li[data-uuid="'+e+'"]').hasClass("active")};function u(){if(a)return;i.tasklist.find("li").length>0?i.taskbar.attr("data-active","1"):i.taskbar.removeAttr("data-active")}function r(){a||i.tasklist.find(".active").removeClass("active")}function s(e,t){if(a)return t();v.translate(e.options.title,function(o){const n=$("<div></div>").text(o||"NodeBB Task").html(),l=$("<li></li>").addClass(e.options.className).html('<a href="#"'+(e.options.image?` style="background-image: url('`+e.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(e.options.icon?'<i class="fa '+e.options.icon+'"></i> ':"")+'<span aria-label="'+n+'" component="taskbar/title">'+n+"</span></a>").attr({title:n,"data-module":e.module,"data-uuid":e.uuid}).addClass(e.options.state!==void 0?e.options.state:"active");(!e.options.state||e.options.state==="active")&&r(),i.tasklist.append(l),u(),e.element=l,l.data(e),m.fire("action:taskbar.pushed",e),t(l)})}const f=function(e,t,o){switch(t){case"title":e.find('[component="taskbar/title"]').text(o);break;case"icon":e.find("i").attr("class","fa fa-"+o);break;case"image":e.find("a").css("background-image",o?'url("'+o.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":e.find("a").css("background-color",o);break;case"color":e.find("a").css("color",o);break}};return i.update=function(e,t,o){if(a)return;const n=i.tasklist.find('[data-module="'+e+'"][data-uuid="'+t+'"]');if(!n.length)return;const l=n.data();Object.keys(o).forEach(function(c){l[c]=o[c],f(n,c,o[c])}),n.data(l)},i}.apply(w,p),h!==void 0&&(E.exports=h)},24187:(E,w,d)=>{"use strict";var p,h;p=[d(64061)],h=function(){const v={};v.show=function(r,s){const f=r.hasOwnProperty("fileSize")&&r.fileSize!==void 0?parseInt(r.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:r.hasOwnProperty("showHelp")&&r.showHelp!==void 0?r.showHelp:!0,fileSize:f,title:r.title||"[[global:upload-file]]",description:r.description||"",button:r.button||"[[global:upload]]",accept:r.accept?r.accept.replace(/,/g,"&#44; "):""},function(e){e.modal("show"),e.on("hidden.bs.modal",function(){e.remove()});const t=e.find("#uploadForm");t.attr("action",r.route),t.find("#params").val(JSON.stringify(r.params)),e.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),t.submit()}),t.submit(function(){return m(e,f,s),!1})})},v.hideAlerts=function(r){$(r).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function m(r,s,f){i(r,"status","[[uploads:uploading-file]]"),r.find("#upload-progress-bar").css("width","0%"),r.find("#upload-progress-box").show().removeClass("hide");const e=r.find("#fileInput");if(!e.val())return i(r,"error","[[uploads:select-file-to-upload]]");if(!u(e[0],s))return i(r,"error","[[error:file-too-big, "+s+"]]");v.ajaxSubmit(r,f)}function i(r,s,f){v.hideAlerts(r),s==="error"&&r.find("#fileUploadSubmitBtn").removeClass("disabled"),f=f.replace(/&amp;#44/g,"&#44"),r.find("#alert-"+s).translateText(f).removeClass("hide")}v.ajaxSubmit=function(r,s){r.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(e){e=a(e),i(r,"error",e.responseJSON?.status?.message||e.responseJSON?.error||`[[error:upload-error-fallback, ${e.status} ${e.statusText}]]`)},uploadProgress:function(e,t,o,n){r.find("#upload-progress-bar").css("width",n+"%")},success:function(e){let t=a(e);e.hasOwnProperty("response")&&e.hasOwnProperty("status")&&e.status.code==="ok"&&(t=e.response.images),s(t[0].url),i(r,"success","[[uploads:upload-success]]"),setTimeout(function(){v.hideAlerts(r),r.modal("hide")},750)}})};function a(r){if(typeof r=="string")try{return JSON.parse(r)}catch{return{error:"[[error:parse-error]]"}}return r}function u(r,s){return window.FileReader&&s?r.files[0].size<=s*1e3:!0}return v}.apply(w,p),h!==void 0&&(E.exports=h)},26940:(E,w,d)=>{E.exports=d(94510)},36159:(E,w,d)=>{"use strict";var p,h;p=[d(49897),d(40027),d(29930),d(24187),d(81335),d(17459),d(65285)],h=function(v,m,i,a,u,r){const s={};return s.get=f=>v.get(`/topics/${f}/thumbs`,{}),s.getByPid=f=>v.get(`/posts/${f}`,{}).then(e=>s.get(e.tid)),s.delete=(f,e)=>v.del(`/topics/${f}/thumbs`,{path:e}),s.deleteAll=f=>{s.get(f).then(e=>{Promise.all(e.map(t=>s.delete(f,t.url)))})},s.upload=f=>new Promise(e=>{a.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+`/api/v3/topics/${f}/thumbs`},function(t){e(t)})}),s.modal={},s.modal.open=function(f){const{id:e,pid:t}=f;let{modal:o}=f,n;return new Promise(l=>{Promise.all([s.get(e),t?s.getByPid(t):[]]).then(c=>new Promise(b=>{const S=c.reduce((F,g)=>F.concat(g));n=S.length,b(S)})).then(c=>u.render("modals/topic-thumbs",{thumbs:c})).then(c=>{o?r.translate(c,function(b){o.find(".bootbox-body").html(b),s.modal.handleSort({modal:o,numThumbs:n})}):(o=m.dialog({title:"[[modules:thumbs.modal.title]]",message:c,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(s.upload(e).then(()=>{s.modal.open({...f,modal:o}),Promise.all([d.e(54516),d.e(99166),d.e(47061),d.e(49775)]).then(function(){var b=[d(71431)];(S=>{S.updateThumbCount(e,$(`[component="composer"][data-uuid="${e}"]`)),l()}).apply(null,b)}).catch(d.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),s.modal.handleDelete({...f,modal:o}),s.modal.handleSort({modal:o,numThumbs:n}))})})},s.modal.handleDelete=f=>{const e=f.modal.get(0),{id:t}=f;e.addEventListener("click",o=>{o.target.closest('button[data-action="remove"]')&&m.confirm("[[modules:thumbs.modal.confirm-remove]]",n=>{if(!n)return;const l=o.target.closest("[data-id]").getAttribute("data-id"),c=o.target.closest("[data-path]").getAttribute("data-path");v.del(`/topics/${l}/thumbs`,{path:c}).then(()=>{s.modal.open(f),Promise.all([d.e(54516),d.e(99166),d.e(47061),d.e(49775)]).then(function(){var b=[d(71431)];(S=>{S.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`))}).apply(null,b)}).catch(d.oe)}).catch(i.error)})})},s.modal.handleSort=({modal:f,numThumbs:e})=>{if(e>1){const t=f.find(".topic-thumbs-modal");t.sortable({items:"[data-id]"}),t.on("sortupdate",s.modal.handleSortChange)}},s.modal.handleSortChange=(f,e)=>{const t=e.item.get(0).parentNode.querySelectorAll("[data-id]");Array.from(t).forEach((o,n)=>{const l=o.getAttribute("data-id");let c=o.getAttribute("data-path");c=c.replace(new RegExp(`^${config.upload_url}`),""),v.put(`/topics/${l}/thumbs/order`,{path:c,order:n}).catch(i.error)})},s}.apply(w,p),h!==void 0&&(E.exports=h)},49897:(E,w,d)=>{"use strict";d.r(w),d.d(w,{del:()=>o,get:()=>r,head:()=>s,patch:()=>e,post:()=>f,put:()=>t});var p=d(91749),h=d.n(p),v=d(40027),m=d.n(v);const i=config.relative_path+"/api/v3";async function a(n,l){if(n.url=n.url.startsWith("/api")?config.relative_path+n.url:i+n.url,typeof l=="function"){u(n).then(c=>l(null,c),c=>l(c));return}try{return await u(n)}catch(c){if(c.message==="A valid login session was not found. Please log in and try again."){const{url:b}=await(0,p.fire)("filter:admin.reauth",{url:"login"});return(0,v.confirm)("[[error:api.reauth-required]]",S=>{S&&ajaxify.go(b)})}throw c}}async function u(n){const{url:l}=n;delete n.url,n.data&&!(n.data instanceof FormData)&&(n.data=JSON.stringify(n.data||{}),n.headers["content-type"]="application/json; charset=utf-8"),{options:n}=await(0,p.fire)("filter:api.options",{options:n}),n.data&&(n.body=n.data,delete n.data);const c=await fetch(l,n),{headers:b}=c,S=b.get("content-type"),F=S&&S.startsWith("application/json");let g;if(n.method!=="HEAD"&&(F?g=await c.json():g=await c.text()),!c.ok)throw g?new Error(F?g.status.message:g):new Error(c.statusText);return F&&g&&g.hasOwnProperty("status")&&g.hasOwnProperty("response")?g.response:g}function r(n,l,c){return a({url:n+(l&&Object.keys(l).length?"?"+$.param(l):"")},c)}function s(n,l,c){return a({url:n+(l&&Object.keys(l).length?"?"+$.param(l):""),method:"HEAD"},c)}function f(n,l,c){return a({url:n,method:"POST",data:l,headers:{"x-csrf-token":config.csrf_token}},c)}function e(n,l,c){return a({url:n,method:"PATCH",data:l,headers:{"x-csrf-token":config.csrf_token}},c)}function t(n,l,c){return a({url:n,method:"PUT",data:l,headers:{"x-csrf-token":config.csrf_token}},c)}function o(n,l,c){return a({url:n,method:"DELETE",data:l,headers:{"x-csrf-token":config.csrf_token}},c)}},51916:E=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var w=typeof window<"u"&&typeof window.document<"u"?window.document:{},d=E.exports,p=function(){for(var m,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,u=i.length,r={};a<u;a++)if(m=i[a],m&&m[1]in w){for(a=0;a<m.length;a++)r[i[0][a]]=m[a];return r}return!1}(),h={change:p.fullscreenchange,error:p.fullscreenerror},v={request:function(m,i){return new Promise(function(a,u){var r=function(){this.off("change",r),a()}.bind(this);this.on("change",r),m=m||w.documentElement;var s=m[p.requestFullscreen](i);s instanceof Promise&&s.then(r).catch(u)}.bind(this))},exit:function(){return new Promise(function(m,i){if(!this.isFullscreen){m();return}var a=function(){this.off("change",a),m()}.bind(this);this.on("change",a);var u=w[p.exitFullscreen]();u instanceof Promise&&u.then(a).catch(i)}.bind(this))},toggle:function(m,i){return this.isFullscreen?this.exit():this.request(m,i)},onchange:function(m){this.on("change",m)},onerror:function(m){this.on("error",m)},on:function(m,i){var a=h[m];a&&w.addEventListener(a,i,!1)},off:function(m,i){var a=h[m];a&&w.removeEventListener(a,i,!1)},raw:p};if(!p){d?E.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(v,{isFullscreen:{get:function(){return!!w[p.fullscreenElement]}},element:{enumerable:!0,get:function(){return w[p.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!w[p.fullscreenEnabled]}}}),d?E.exports=v:window.screenfull=v})()},57904:(E,w,d)=>{"use strict";var p,h;p=[d(14063)],h=function(v){var m={},i=0,a=.3,u=.05,r=768,s=$("body"),f=$(window),e=$('[component="navbar"]');const t=document.getElementById("content");var o=e[0];function n(){return localStorage.getItem("composer:resizeRatio")||.5}function l(g){localStorage.setItem("composer:resizeRatio",Math.min(g,1))}function c(){var g;o?g=o.getBoundingClientRect():g={bottom:0};var x=Math.max(g.bottom,0),A={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return A.width=A.right,A.height=A.bottom,A.boundedTop=x,A.boundedHeight=A.bottom-x,A}function b(g,x){var A=c(),C=g[0],T=window.getComputedStyle(C),N=parseInt(T.getPropertyValue("min-height"),10),B=Math.max(N/window.innerHeight,a);if(A.width>=r){const I=(A.height-A.boundedHeight)/A.height;x=Math.min(Math.max(x,B+I),1);var z=x*A.boundedHeight/A.height;C.style.top=((1-z)*100).toString()+"%";var P=C.getBoundingClientRect();t.style.paddingBottom=(P.bottom-P.top).toString()+"px"}else C.style.top=0,t.style.paddingBottom=0;g.ratio=x,v.updateActive(g.attr("data-uuid"))}var S=b,F=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return F&&(S=function(g,x){F(function(){b(g,x),setTimeout(function(){f.trigger("action:composer.resize"),g.trigger("action:composer.resize")},0)})}),m.reposition=function(g){var x=n();x>=1-u&&(x=1,g.addClass("maximized")),S(g,x)},m.maximize=function(g,x){x?S(g,1):m.reposition(g)},m.handleResize=function(g){var x=0,A=0,C=0,T=g.find(".resizer"),N=T[0];function B(D){var k=N.getBoundingClientRect(),R=(k.top+k.bottom)/2;x=(R-D.clientY)/2,A=D.clientY,f.on("mousemove",z),f.on("mouseup",P),s.on("touchmove",I)}function z(D){var k=D.clientY-x,R=c(),y=(R.height-k)/R.boundedHeight;S(g,y)}function P(D){D.preventDefault(),C=D.clientY,g.find("textarea").focus(),f.off("mousemove",z),f.off("mouseup",P),s.off("touchmove",I);var k=C-x,R=c(),y=(R.height-k)/R.boundedHeight;C-A===0&&g.hasClass("maximized")?(g.removeClass("maximized"),y=!i||i>=1-u?.5:i,S(g,y)):C-A===0||y>=1-u?(S(g,1),g.addClass("maximized"),i=y):g.removeClass("maximized"),l(y)}function I(D){D.preventDefault(),z(D.touches[0])}T.on("mousedown",function(D){D.button===0&&(D.preventDefault(),B(D))}).on("touchstart",function(D){D.preventDefault(),B(D.touches[0])}).on("touchend",P)},m}.apply(w,p),h!==void 0&&(E.exports=h)},62590:(E,w,d)=>{"use strict";var p,h;p=[d(91749)],h=function(v){var m={};return m.render=function(i,a){if(a=a||function(){},!i.find(".preview-container").is(":visible"))return a();var u=i.find("textarea");socket.emit("plugins.composer.renderPreview",u.val(),function(r,s){r||(s=$("<div>"+s+"</div>"),s.find("img:not(.not-responsive)").addClass("img-fluid"),i.find(".preview").html(s),v.fire("action:composer.preview",{postContainer:i,preview:s}),a())})},m.matchScroll=function(i){if(i.find(".preview-container").is(":visible")){var a=i.find("textarea"),u=i.find(".preview");if(a.length&&u.length){var r=a[0].scrollHeight-a.height();if(r===0)return;var s=a.scrollTop()/r;u.scrollTop(Math.max(u[0].scrollHeight-u.height(),0)*s)}}},m.handleToggler=function(i){const a=i.get(0);m.env=utils.findBootstrapEnvironment();const u=["xs","sm"].includes(m.env),r=a.querySelector('.formatting-bar [data-action="preview"]'),s=r.querySelector(".show-text"),f=r.querySelector(".hide-text"),e=localStorage.getItem("composer:previewToggled"),t=config["composer-default"].hidePreviewOnOpen==="on";let o=!u&&(e===null&&!t||e==="true");const n=a.querySelector(".preview-container"),l=a.querySelector(".write-container");if(!r)return;function c(b){u?(n.classList.toggle("hide",!1),l.classList.toggle("maximized",!1),n.classList.toggle("d-none",!b),n.classList.toggle("d-flex",b),n.classList.toggle("w-100",b),l.classList.toggle("d-flex",!b),l.classList.toggle("d-none",b),l.classList.toggle("w-100",!b)):(n.classList.toggle("hide",!b),l.classList.toggle("w-50",b),l.classList.toggle("w-100",!b),localStorage.setItem("composer:previewToggled",b)),s.classList.toggle("hide",b),f.classList.toggle("hide",!b),b&&m.render(i),m.matchScroll(i)}m.toggle=c,r.addEventListener("click",b=>{b.button===0&&(o=!o,c(o))}),c(o)},m}.apply(w,p),h!==void 0&&(E.exports=h)},89596:(E,w,d)=>{E.exports=d(62590)},91943:(E,w,d)=>{"use strict";var p,h;p=[d(89596),d(99594),d(36159),d(51916)],h=function(v,m,i,a){var u={},r={picture:function(){var t=this;t.find("#files").attr("accept","image/*").click()},upload:function(){var t=this;t.find("#files").attr("accept","").click()},thumbs:function(){u.exitFullscreen();var t=this;Promise.all([d.e(54516),d.e(99166),d.e(47061),d.e(29567)]).then(function(){var o=[d(71431)];(function(n){const l=t.get(0).getAttribute("data-uuid"),c=n.posts[l];(c.action==="topics.post"||c.action==="posts.edit"&&c.isMain)&&i.modal.open({id:l,pid:c.pid}).then(()=>{t.trigger("thumb.uploaded"),n.updateThumbCount(l,t)})}).apply(null,o)}).catch(d.oe)},tags:function(){var t=this;t.find(".tags-container").toggleClass("hidden")},zen:function(){var t=this;$(window).one("resize",function(){function o(){a.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),m.reposition(t),$(window).off("resize",o))}a.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),t.find(".write").focus(),$(window).on("resize",o),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",a.exit))}),a.toggle(t.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:t})}},s=[];u.exitFullscreen=function(){a.isEnabled&&a.isFullscreen&&a.exit()},u.addComposerButtons=function(){const t=$(".formatting-bar"),o=t.find(".formatting-group #fileForm");s.forEach(l=>{let c="";Array.isArray(l.dropdownItems)&&l.dropdownItems.length?c=e(l):c=`
					<li title="${l.title||""}">
						<button data-format="${l.name}" class="btn btn-sm btn-link text-reset position-relative" aria-label="${l.title||""}">
							<i class="${l.iconClass}"></i>
							${f(l)}
						</button>
					</li>
				`,o.before(c)}),t.find(".formatting-group>li").tooltip({container:"#content",animation:!1,trigger:"manual"}).on("mouseenter",function(l){const c=$(l.target);c.hasClass("dropdown-menu")||!!c.parents(".dropdown-menu").length||$(this).tooltip("show")}).on("click mouseleave",function(){$(this).tooltip("hide")})};function f(t){let o="";return t.badge&&(o='<span class="px-1 position-absolute top-0 start-100 translate-middle badge rounded text-bg-info"></span>'),o}function e(t){const o=t.dropdownItems.map(function(n){return`
				<li>
					<a href="#" data-format="${n.name}" class="dropdown-item rounded-1 position-relative" role="menuitem">
						<i class="${n.iconClass} text-secondary"></i> ${n.text}
						${f(n)}
					</a>
				</li>
			`});return`
			<li class="dropdown bottom-sheet" tab-index="-1" title="${t.title}">
				<button class="btn btn-sm btn-link text-reset" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="${t.title}">
					<i class="${t.iconClass}"></i>
				</button>
				<ul class="dropdown-menu p-1" role="menu">
				${o}
				</ul>
			</li>
		`}return u.addButton=function(t,o,n,l){l=l||t.replace("fa fa-",""),r[l]=o,s.push({name:l,iconClass:t,title:n})},u.addDropdown=function(t){s.push({iconClass:t.iconClass,title:t.title,dropdownItems:t.dropdownItems}),t.dropdownItems.forEach(o=>{o.name&&o.onClick&&(r[o.name]=o.onClick)})},u.getDispatchTable=function(){return r},u.addButtonDispatch=function(t,o){r[t]=o},u.addHandler=function(t){t.on("click",".formatting-bar [data-format]",function(o){var n=$(this).attr("data-format"),l=$(this).parents('[component="composer"]').find("textarea")[0];r.hasOwnProperty(n)&&(r[n].call(t,l,l.selectionStart,l.selectionEnd,o),v.render(t))})},u}.apply(w,p),h!==void 0&&(E.exports=h)},94510:(E,w,d)=>{"use strict";var p,h;p=[d(89596)],h=function(v){var m={};return m.insertIntoTextarea=function(i,a){var u={context:this,textarea:i,value:a,preventDefault:!1};if($(window).trigger("action:composer.insertIntoTextarea",u),!u.preventDefault){var r=$(u.textarea),s=r.val(),f=r.parents('[component="composer"]');r.val(s.slice(0,u.textarea.selectionStart)+u.value+s.slice(u.textarea.selectionStart)),v.render(f)}},m.replaceSelectionInTextareaWith=function(i,a){var u={context:this,textarea:i,value:a,preventDefault:!1};if($(window).trigger("action:composer.replaceSelectionInTextareaWith",u),!u.preventDefault){var r=$(u.textarea),s=r.val(),f=r.parents('[component="composer"]');r.val(s.slice(0,u.textarea.selectionStart)+u.value+s.slice(u.textarea.selectionEnd)),v.render(f)}},m.wrapSelectionInTextareaWith=function(i,a,u){var r={context:this,textarea:i,leading:a,trailing:u,preventDefault:!1};if($(window).trigger("action:composer.wrapSelectionInTextareaWith",r),!r.preventDefault){u===void 0&&(u=a);var s=$(i),f=s.val(),e=/^(\s*)([\s\S]*?)(\s*)$/.exec(f.slice(i.selectionStart,i.selectionEnd));return e[2]||(e=[null,"",f.slice(i.selectionStart,i.selectionEnd),""]),s.val(f.slice(0,i.selectionStart)+e[1]+a+e[2]+u+e[3]+f.slice(i.selectionEnd)),[e[1].length,e[3].length]}},m.updateTextareaSelection=function(i,a,u){var r={context:this,textarea:i,start:a,end:u,preventDefault:!1};$(window).trigger("action:composer.updateTextareaSelection",r),!r.preventDefault&&(i.setSelectionRange(r.start,r.end),$(r.textarea).focus())},m.getBlockData=function(i,a,u){var r=i.value;a=a.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var s=new RegExp(a,"g"),f,e=[],t;for(r=r.split(`
`).reduce(function(o,n){return o!==null||(o=u<=n.length?n:null,o===null&&(u-=n.length+1)),o},null);(f=s.exec(r))!==null;)e.push(f.index);return t={in:!!(e.reduce(function(o,n){return u>=n+2&&(o+=1),o},0)%2),atEnd:e.reduce(function(o,n){return o||u===n},!1)},t.atEnd=t.in?t.atEnd:!1,t},m}.apply(w,p),h!==void 0&&(E.exports=h)},99594:(E,w,d)=>{E.exports=d(57904)}}]);
