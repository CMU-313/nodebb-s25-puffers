"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[21374,99127,63154,34271,1091,25432,15794,57490,49897],{8454:(N,S,i)=>{var v,A;v=[i(24962),i(96352),i(52473),i(17459),i(34342),i(49897),i(40027),i(29930),i(91749),i(30076)],A=function(k,U,I,x,b,E,w,c,l,T){const D={};let r=!1;D.init=function(o){r=!1,m(),d(o),k.addShareHandlers(ajaxify.data.titleRaw),b.addVoteHandler(),D.updatePostCount(ajaxify.data.postcount)};function m(){document.querySelector('[component="topic"]')&&$('[component="topic"]').on("show.bs.dropdown",'[component="post/tools"]',function(){const t=$(this),n=t.find(".dropdown-menu"),{top:e}=this.getBoundingClientRect();if(t.toggleClass("dropup",e>window.innerHeight/2),n.attr("data-loaded"))return;n.html(T.generatePlaceholderWave([3,5,9,7,10,"divider",10]));const a=t.parents("[data-pid]"),s=a.attr("data-pid"),C=parseInt(a.attr("data-index"),10);socket.emit("posts.loadPostTools",{pid:s},async(y,R)=>{if(y)return c.error(y);R.posts.display_move_tools=R.posts.display_move_tools&&C!==0;const P=await app.parseAndTranslate("partials/topic/post-menu-list",R),M=i(57576);n.attr("data-loaded","true").html(P),new M("[data-clipboard-text]"),l.fire("action:post.tools.load",{element:n})})})}D.toggle=function(o,t){const n=I.get("post","pid",o);n.find('[component="post/quote"], [component="post/bookmark"], [component="post/reply"], [component="post/flag"], [component="user/chat"]').toggleClass("hidden",t),n.find('[component="post/delete"]').toggleClass("hidden",t).parent().attr("hidden",t?"":null),n.find('[component="post/restore"]').toggleClass("hidden",!t).parent().attr("hidden",t?null:""),n.find('[component="post/purge"]').toggleClass("hidden",!t).parent().attr("hidden",t?null:""),D.removeMenu(n)},D.removeMenu=function(o){o.find('[component="post/tools"] .dropdown-menu').removeAttr("data-loaded").html("")},D.updatePostCount=function(o){I.get("topic/post-count").attr("title",o).html(T.humanReadableNumber(o)),U.setCount(o)};function d(o){const t=I.get("topic");Y(),t.on("click",'[component="post/quote"]',function(){h($(this),o)}),t.on("click",'[component="post/reply"]',function(){f($(this),o)}),$(".topic").on("click",'[component="topic/reply"]',function(e){e.preventDefault(),f($(this),o)}),$(".topic").on("click",'[component="topic/reply-as-topic"]',function(){x.translate(`[[topic:link-back, ${ajaxify.data.titleRaw}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(e){l.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:e})})}),t.on("click",'[component="post/bookmark"]',function(){return u($(this),p($(this),"data-pid"))}),t.on("click",'[component="post/upvote"]',function(){return b.toggleVote($(this),".upvoted",1)}),t.on("click",'[component="post/downvote"]',function(){return b.toggleVote($(this),".downvoted",-1)}),t.on("click",'[component="post/vote-count"]',function(){b.showVotes(p($(this),"data-pid"))}),t.on("click",'[component="post/flag"]',function(){const e=p($(this),"data-pid");i.e(6574).then(function(){var a=[i(6574)];(function(s){s.showFlagModal({type:"post",id:e})}).apply(null,a)}).catch(i.oe)}),t.on("click",'[component="post/flagUser"]',function(){const e=p($(this),"data-uid");i.e(6574).then(function(){var a=[i(6574)];(function(s){s.showFlagModal({type:"user",id:e})}).apply(null,a)}).catch(i.oe)}),t.on("click",'[component="post/flagResolve"]',function(){const e=$(this).attr("data-flagId");i.e(6574).then(function(){var a=[i(6574)];(function(s){s.resolve(e)}).apply(null,a)}).catch(i.oe)}),t.on("click",'[component="post/edit"]',function(){const e=$(this),a=parseInt(p(e,"data-timestamp"),10),s=parseInt(ajaxify.data.postEditDuration,10);n(s,a,"post-edit-duration-expired")&&l.fire("action:composer.post.edit",{pid:p(e,"data-pid")})}),config.enablePostHistory&&ajaxify.data.privileges["posts:history"]&&t.on("click",'[component="post/view-history"], [component="post/edit-indicator"]',function(){const e=$(this);i.e(92747).then(function(){var a=[i(92747)];(function(s){s.open(p(e,"data-pid"))}).apply(null,a)}).catch(i.oe)}),t.on("click",'[component="post/delete"]',function(){const e=$(this),a=parseInt(p(e,"data-timestamp"),10),s=parseInt(ajaxify.data.postDeleteDuration,10);n(s,a,"post-delete-duration-expired")&&B($(this))});function n(e,a,s){if(!ajaxify.data.privileges.isAdminOrMod&&e&&Date.now()-a>e*1e3){const C=Math.floor(e/86400),y=Math.floor(e%86400/3600),R=Math.floor(e%86400%3600/60),P=e%86400%3600%60;let M="[[error:"+s+", "+e+"]]";return C?y?M="[[error:"+s+"-days-hours, "+C+", "+y+"]]":M="[[error:"+s+"-days, "+C+"]]":y?R?M="[[error:"+s+"-hours-minutes, "+y+", "+R+"]]":M="[[error:"+s+"-hours, "+y+"]]":R&&(P?M="[[error:"+s+"-minutes-seconds, "+R+", "+P+"]]":M="[[error:"+s+"-minutes, "+R+"]]"),c.error(M),!1}return!0}t.on("click",'[component="post/restore"]',function(){B($(this))}),t.on("click",'[component="post/purge"]',function(){j($(this))}),t.on("click",'[component="post/move"]',function(){const e=$(this);i.e(90677).then(function(){var a=[i(90677)];(function(s){s.init(e.parents("[data-pid]"))}).apply(null,a)}).catch(i.oe)}),t.on("click",'[component="post/change-owner"]',function(){const e=$(this);i.e(17205).then(function(){var a=[i(17205)];(function(s){s.init(e.parents("[data-pid]"))}).apply(null,a)}).catch(i.oe)}),t.on("click",'[component="post/ban-ip"]',function(){const e=$(this).attr("data-ip");socket.emit("blacklist.addRule",e,function(a){if(a)return c.error(a);c.success("[[admin/manage/blacklist:ban-ip]]")})}),t.on("click",'[component="post/chat"]',function(){K($(this))})}async function f(o,t){const n=await g();V(async function(){let e=await W(o);(p(o,"data-uid")==="0"||!p(o,"data-userslug"))&&(e="");const a=o.is('[component="post/reply"]')?p(o,"data-pid"):null,s=!a||!n.pid||a===n.pid;n.text&&s?(e=e||n.username,l.fire("action:composer.addQuote",{tid:t,pid:a,title:ajaxify.data.titleRaw,username:e,body:n.text,selectedPid:n.pid})):l.fire("action:composer.post.new",{tid:t,pid:a,title:ajaxify.data.titleRaw,body:e?e+" ":$('[component="topic/quickreply/text"]').val()||""})})}async function h(o,t){const n=await g();V(async function(){const e=await W(o),a=p(o,"data-pid");function s(y){l.fire("action:composer.addQuote",{tid:t,pid:a,username:e,title:ajaxify.data.titleRaw,text:y})}if(n.text&&a&&a===n.pid)return s(n.text);const{content:C}=await E.get(`/posts/${a}/raw`);s(C)})}async function g(){let o="",t,n="";const e=window.getSelection?window.getSelection():document.selection.createRange(),a=$('[component="post"] [component="post/content"]');let s;return a.each(function(C,y){e&&e.containsNode&&y&&e.containsNode(y,!0)&&(s=y)}),s&&e&&(o=e.toString(),t=$(s).parents('[component="post"]').attr("data-pid"),n=await W($(s))),{text:o,pid:t,username:n}}function u(o,t){const n=o.attr("data-bookmarked")==="false"?"put":"del";return E[n](`/posts/${t}/bookmark`,void 0,function(e){if(e)return c.error(e);const a=n==="put"?"bookmark":"unbookmark";l.fire(`action:post.${a}`,{pid:t})}),!1}function p(o,t){return o.parents("[data-pid]").attr(t)}function W(o){return new Promise(t=>{let n="";if(o.attr("component")==="topic/reply"){t(n);return}const e=o.parents("[data-pid]");if(e.length){Promise.all([i.e(53050),i.e(26174)]).then(function(){var a=[i(13230)];(function(s){n=s(e.attr("data-username"),!0),n||(e.attr("data-uid")!=="0"?n="[[global:former-user]]":n="[[global:guest]]"),n&&n!=="[[global:former-user]]"&&n!=="[[global:guest]]"&&(n="@"+n),t(n)}).apply(null,a)}).catch(i.oe);return}t(n)})}function B(o){const t=p(o,"data-pid"),e=I.get("post","pid",t).hasClass("deleted")?"restore":"delete";L(e,t)}function j(o){L("purge",p(o,"data-pid"))}async function L(o,t){({action:o}=await l.fire(`static:post.${o}`,{action:o,pid:t})),o&&w.confirm("[[topic:post-"+o+"-confirm]]",function(n){if(!n)return;const e=o==="purge"?"":"/state";E[o==="restore"?"put":"del"](`/posts/${t}${e}`).catch(c.error)})}function K(o){const t=o.parents("[data-pid]");return i.e(92619).then(function(){var n=[i(92619)];(function(e){e.newChat(t.attr("data-uid"))}).apply(null,n)}).catch(i.oe),o.parents(".btn-group").find(".dropdown-toggle").click(),!1}function V(o){if(!parseInt(ajaxify.data.topicStaleDays,10))return o();const n=Math.min(Date.now()-1e3*60*60*24*ajaxify.data.topicStaleDays,864e13);if(r||ajaxify.data.lastposttime>=n)return o();w.dialog({title:"[[topic:stale.title]]",message:"[[topic:stale.warning]]",buttons:{reply:{label:"[[topic:stale.reply-anyway]]",className:"btn-link",callback:function(){r=!0,o()}},create:{label:"[[topic:stale.create]]",className:"btn-primary",callback:function(){x.translate(`[[topic:link-back, ${ajaxify.data.title}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(a){l.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:a,fromStaleTopic:!0})})}}}}).modal()}const F=utils.debounce(z,250);function Y(){ajaxify.data.privileges["topics:reply"]&&(l.onPage("action:posts.loaded",Q),$(document).off("selectionchange"),$(document).on("selectionchange",function(){window.getSelection().toString()===""&&$('[component="selection/tooltip"]').addClass("hidden")}),$(document).on("selectionchange",F))}function z(){window.getSelection().toString()===""||Q()}async function Q(){let o=$('[component="selection/tooltip"]');if(o.addClass("hidden"),o.attr("data-ajaxify")==="1"){o.remove();return}const t=window.getSelection();if(t.focusNode&&t.type==="Range"&&ajaxify.data.template.topic){const n=$(t.focusNode),e=$(t.anchorNode),a=e.parents("[data-pid]").attr("data-pid"),s=n.parents("[data-pid]").attr("data-pid");if(a!==s||!n.parents('[component="post/content"]').length||!e.parents('[component="post/content"]').length)return;const C=n.parents("[data-pid]"),y=t.getRangeAt(0);if(!C.length||y.collapsed)return;const R=y.getClientRects(),P=R[R.length-1];o.length||(o=await app.parseAndTranslate("partials/topic/selection-tooltip",ajaxify.data),$('[component="selection/tooltip"]').remove(),o.addClass("hidden").appendTo("body")),o.off("click").on("click",'[component="selection/tooltip/quote"]',function(){o.addClass("hidden"),h(C.find('[component="post/quote"]'),ajaxify.data.tid)}),o.removeClass("hidden"),$(window).one("action:ajaxify.start",function(){o.attr("data-ajaxify",1).addClass("hidden"),$(document).off("selectionchange",F)});const M=o.outerWidth(!0);o.css({top:P.bottom+$(window).scrollTop(),left:M>P.width?P.left:P.left+P.width-M})}}return D}.apply(S,v),A!==void 0&&(N.exports=A)},34342:(N,S,i)=>{var v,A;v=[i(52473),i(17459),i(49897),i(91749),i(40027),i(29930),i(89336)],A=function(k,U,I,x,b,E,w){const c={};let l={};c.addVoteHandler=function(){l={},T()&&(k.get("topic").on("mouseenter",'[data-pid] [component="post/vote-count"]',m),k.get("topic").on("mouseleave",'[data-pid] [component="post/vote-count"]',r))};function T(){const{upvoteVisibility:f,privileges:h}=ajaxify.data;return h.isAdminOrMod||f==="all"||f==="loggedin"&&config.loggedIn}function D(){const{upvoteVisibility:f,downvoteVisibility:h,privileges:g}=ajaxify.data;return g.isAdminOrMod||f==="all"||h==="all"||(f==="loggedin"||h==="loggedin")&&config.loggedIn}function r(){const f=$(this),h=f.parents("[data-pid]").attr("data-pid"),g=w.Tooltip.getInstance(this);g&&(g.dispose(),f.attr("title","")),l[h]=!1}function m(){const f=$(this),g=f.parent().parents("[data-pid]").attr("data-pid");l[g]=!0;const u=w.Tooltip.getInstance(this);u&&(u.dispose(),f.attr("title","")),I.get(`/posts/${g}/upvoters`,{},function(p,W){if(p)return E.error(p);l[g]&&W&&d(f,W)})}function d(f,h){function g(p){f.attr("title",p),new w.Tooltip(f,{container:"#content",html:!0}).show()}let u=h.usernames.filter(p=>p!=="[[global:former-user]]");u.length&&(u.length+h.otherCount>h.cutoff?(u=u.join(", ").replace(/,/g,"|"),U.translate("[[topic:users-and-others, "+u+", "+h.otherCount+"]]",function(p){p=p.replace(/\|/g,","),g(p)})):(u=u.join(", "),g(u)))}return c.toggleVote=function(f,h,g){const u=f.closest("[data-pid]"),W=u.find(h).length?"del":"put",B=u.attr("data-pid");return I[W](`/posts/${B}/vote`,{delta:g},function(j){if(j){if(!app.user.uid){ajaxify.go("login");return}return E.error(j)}x.fire("action:post.toggleVote",{pid:B,delta:g,unvote:W==="del"})}),!1},c.showVotes=function(f){D()&&I.get(`/posts/${f}/voters`,{},function(h,g){if(h)return E.error(h);app.parseAndTranslate("modals/votes",g,function(u){const p=b.dialog({title:"[[global:voters]]",message:u,className:"vote-modal",show:!0,onEscape:!0,backdrop:!0});p.on("click",function(){p.modal("hide")})})})},c}.apply(S,v),A!==void 0&&(N.exports=A)},49897:(N,S,i)=>{i.r(S),i.d(S,{del:()=>D,get:()=>E,head:()=>w,patch:()=>l,post:()=>c,put:()=>T});var v=i(91749),A=i.n(v),k=i(40027),U=i.n(k);const I=config.relative_path+"/api/v3";async function x(r,m){if(r.url=r.url.startsWith("/api")?config.relative_path+r.url:I+r.url,typeof m=="function"){b(r).then(d=>m(null,d),d=>m(d));return}try{return await b(r)}catch(d){if(d.message==="A valid login session was not found. Please log in and try again."){const{url:f}=await(0,v.fire)("filter:admin.reauth",{url:"login"});return(0,k.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go(f)})}throw d}}async function b(r){const{url:m}=r;delete r.url,r.data&&!(r.data instanceof FormData)&&(r.data=JSON.stringify(r.data||{}),r.headers["content-type"]="application/json; charset=utf-8"),{options:r}=await(0,v.fire)("filter:api.options",{options:r}),r.data&&(r.body=r.data,delete r.data);const d=await fetch(m,r),{headers:f}=d,h=f.get("content-type"),g=h&&h.startsWith("application/json");let u;if(r.method!=="HEAD"&&(g?u=await d.json():u=await d.text()),!d.ok)throw u?new Error(g?u.status.message:u):new Error(d.statusText);return g&&u&&u.hasOwnProperty("status")&&u.hasOwnProperty("response")?u.response:u}function E(r,m,d){return x({url:r+(m&&Object.keys(m).length?"?"+$.param(m):"")},d)}function w(r,m,d){return x({url:r+(m&&Object.keys(m).length?"?"+$.param(m):""),method:"HEAD"},d)}function c(r,m,d){return x({url:r,method:"POST",data:m,headers:{"x-csrf-token":config.csrf_token}},d)}function l(r,m,d){return x({url:r,method:"PATCH",data:m,headers:{"x-csrf-token":config.csrf_token}},d)}function T(r,m,d){return x({url:r,method:"PUT",data:m,headers:{"x-csrf-token":config.csrf_token}},d)}function D(r,m,d){return x({url:r,method:"DELETE",data:m,headers:{"x-csrf-token":config.csrf_token}},d)}},29869:N=>{N.exports=function(S,i,v){i.setGlobal("true",!0),i.setGlobal("false",!1);const A=24*60*60*1e3,k={displayMenuItem:I,buildMetaTag:x,buildLinkTag:b,stringify:E,escape:w,stripTags:c,buildCategoryIcon:l,buildCategoryLabel:T,generateCategoryBackground:D,generateChildrenCategories:r,generateTopicClass:m,membershipBtn:d,spawnPrivilegeStates:f,localeToHTML:h,renderTopicImage:g,renderDigestAvatar:u,userAgentIcons:p,buildAvatar:W,increment:B,generateWroteReplied:j,generateRepliedTo:L,generateWrote:K,isoTimeToLocaleString:V,shouldHideReplyContainer:F,humanReadableNumber:Y,formattedNumber:z,generatePlaceholderWave:Q,register:o,__escape:U};function U(t){return t}function I(t,n){const e=t.navigation[n];return!(!e||e.route.match("/users")&&t.user&&!t.user.privileges["view:users"]||e.route.match("/tags")&&t.user&&!t.user.privileges["view:tags"]||e.route.match("/groups")&&t.user&&!t.user.privileges["view:groups"])}function x(t){const n=t.name?'name="'+t.name+'" ':"",e=t.property?'property="'+t.property+'" ':"",a=t.content?'content="'+t.content.replace(/\n/g," ")+'" ':"";return"<meta "+n+e+a+`/>
	`}function b(t){const n=["link","rel","as","type","href","sizes","title","crossorigin"],[e,a,s,C,y,R,P,M]=n.map(H=>t[H]?`${H}="${t[H]}" `:"");return"<link "+e+a+s+C+R+P+y+M+`/>
	`}function E(t){return JSON.stringify(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function w(t){return S.escapeHTML(t)}function c(t){return S.stripHTMLTags(t)}function l(t,n,e){return t?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${e}" style="${D(t)} width:${n}; height: ${n}; font-size: ${parseInt(n,10)/2}px;">${t.icon?`<i class="fa fa-fw ${t.icon}"></i>`:""}</span>`:""}function T(t,n="a",e=""){if(!t)return"";const a=n==="a"?`href="${v}/category/${t.slug}"`:"";return`<${n} ${a} class="badge px-1 text-truncate text-decoration-none ${e}" style="color: ${t.color};background-color: ${t.bgColor};border-color: ${t.bgColor}!important; max-width: 70vw;">
			${t.icon&&t.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${t.icon}"></i>`:""}
			${t.name}
		</${n}>`}function D(t){if(!t)return"";const n=[];return t.bgColor&&(n.push("background-color: "+t.bgColor),n.push(`border-color: ${t.bgColor}!important`)),t.color&&n.push("color: "+t.color),t.backgroundImage&&(n.push("background-image: url("+t.backgroundImage+")"),t.imageClass&&n.push("background-size: "+t.imageClass)),n.join("; ")+";"}function r(t){let n="";return!t||!t.children||!t.children.length||(t.children.forEach(function(e){if(e&&!e.isSection){const a=e.link?e.link:v+"/category/"+e.slug;n+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+D(e)+'"><i class="fa fa-fw '+e.icon+'"></i></div><a href="'+a+'"><small>'+e.name+"</small></a></span>"}}),n=n&&'<span class="category-children">'+n+"</span>"),n}function m(t){return["locked","pinned","deleted","unread","scheduled"].filter(e=>!!t[e]).join(" ")}function d(t,n=""){return t.isMember&&t.name!=="administrators"?`<button class="btn btn-danger ${n}" data-action="leave" data-group="${t.displayName}" ${t.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:t.isPending&&t.name!=="administrators"?`<button class="btn btn-warning disabled ${n}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:t.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${t.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${t.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!t.disableJoinRequests&&t.name!=="administrators"?`<button class="btn btn-success ${n}" data-action="join" data-group="${t.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function f(t,n,e){const a=[];for(const s in n)n.hasOwnProperty(s)&&a.push({name:s,state:n[s],type:e[s]});return a.map(function(s){const C=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],y=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],R=["groups:moderate"],P=t==="guests"&&(C.includes(s.name)||s.name.startsWith("groups:admin:"))||t==="spiders"&&!y.includes(s.name)||t==="Global Moderators"&&R.includes(s.name);return`
				<td data-privilege="${s.name}" data-value="${s.state}" data-type="${s.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${s.state?" checked":""}${P?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function h(t,n){return t=t||n||"en-GB",t.replace("_","-")}function g(t){return t.thumb?'<img src="'+t.thumb+'" class="img-circle user-img" title="'+t.user.username+'" />':'<img component="user/picture" data-uid="'+t.user.uid+'" src="'+t.user.picture+'" class="user-img" title="'+t.user.username+'" />'}function u(t){return t.teaser?t.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.teaser.user.picture+'" title="'+t.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.teaser.user["icon:text"]+"</div>":t.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.user.picture+'" title="'+t.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.user["icon:text"]+"</div>"}function p(t){let n="";switch(t.platform){case"Linux":n+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":n+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":n+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":n+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":n+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":n+='<i class="fa fa-fw fa-mobile"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(t.browser){case"Chrome":n+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":n+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":n+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":n+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":n+='<i class="fa fa-fw fa-edge"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}return n}function W(t,n,e,a,s){t||(t=this),a=a||"";const C=new Map([["title",t.username],["data-uid",t.uid],["class",`avatar ${a}${e?" avatar-rounded":""}`]]),y=[`--avatar-size: ${n};`],R=M=>Array.from(M).reduce((H,[G,J])=>(H+=` ${G}="${J}"`,H),"");let P="";return t.picture&&(P+=`<img${R(C)} alt="${t.username}" loading="lazy" component="${s||"avatar/picture"}" src="${t.picture}" style="${y.join(" ")}" onError="this.remove()" itemprop="image" />`),P+=`<span${R(C)} component="${s||"avatar/icon"}" style="${y.join(" ")} background-color: ${t["icon:bgColor"]}">${t["icon:text"]}</span>`,P}function B(t,n){return String(t+parseInt(n,10))}function j(t,n){return t.toPid?L(t,n):K(t,n)}function L(t,n){const e=t.parent&&t.parent.displayname?t.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${t.timestamp<Date.now()-n*A?"on":"ago"}, ${t.toPid}, ${v}/post/${t.toPid}, ${e}, ${v}/post/${t.pid}, ${t.timestampISO}]]`}function K(t,n){return`[[topic:wrote-${t.timestamp<Date.now()-n*A?"on":"ago"}, ${v}/post/${t.pid}, ${t.timestampISO}]]`}function V(t,n="en-GB"){return new Date(t).toLocaleString([n],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function F(t){return!!(t.replies.count<=0||t.replies.hasSingleImmediateReply)}function Y(t,n=1){return S.makeNumberHumanReadable(t,n)}function z(t){return S.addCommas(t)}function Q(t){return t.map(e=>e==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${e}"></div>
			</li>`)}function o(){Object.keys(k).forEach(function(t){i.registerHelper(t,k[t])})}return k}},30076:(N,S,i)=>{var v,A;const k=i(29869);v=[i(77918),i(81335)],A=function(U,I){return k(U,I,config.relative_path)}.apply(S,v),A!==void 0&&(N.exports=A)},24962:(N,S,i)=>{var v,A;v=[i(91749)],A=function(k){const U={},I=window.location.protocol+"//"+window.location.host;U.addShareHandlers=function(E){function w(c,l,T,D){return window.open(c,"_blank","width="+T+",height="+D+",scrollbars=no,status=no"),k.fire("action:share.open",{url:c,urlToPost:l}),!1}$("#content").off("shown.bs.dropdown",".share-dropdown").on("shown.bs.dropdown",".share-dropdown",function(){const c=$(this).find(".post-link");c.val(I+b($(this))),setTimeout(function(){c.putCursorAtEnd().select()},50)}),x(".post-link",function(c){return c.preventDefault(),!1}),x('[component="share/twitter"]',function(){const c=b($(this)),l=`https://twitter.com/intent/tweet?text=${encodeURIComponent(E)}&url=${encodeURIComponent(c)}`;return w(l,c,550,420)}),x('[component="share/facebook"]',function(){const c=b($(this)),l=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(c)}`;return w(l,c,626,436)}),x('[component="share/whatsapp"]',function(){const c=b($(this)),l=encodeURIComponent(E)+" - "+encodeURIComponent(c),T=config.useragent.isMobile?`whatsapp://send?text=${l}`:`https://wa.me/?text=${l}`;return w(T,c,626,436)}),x('[component="share/telegram"]',function(){const c=b($(this)),l=`https://t.me/share/url?text=${encodeURIComponent(E)}&url=${encodeURIComponent(c)}`;return w(l,c,626,436)}),x('[component="share/linkedin"]',function(){const c=b($(this)),l=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(c)}`;return w(l,c,626,436)}),k.fire("action:share.addHandlers",{openShare:w})};function x(E,w){$("#content").off("click",E).on("click",E,w)}function b(E){const w=parseInt(E.parents("[data-pid]").attr("data-pid"),10),c="/post"+(w?"/"+w:"");return I+config.relative_path+c}return U}.apply(S,v),A!==void 0&&(N.exports=A)}}]);
