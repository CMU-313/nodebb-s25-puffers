"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[82858,99127,34271,1091,49897],{22410:(O,p,c)=>{var d,E;d=[c(91749),c(29930),c(49897)],E=function(m,v,y){const a={};let f,u=0,s=!1,h,g=0;a.init=function(t,n){const e=$("body");typeof t=="function"?(f=t,h=e):(f=n,h=t||e),u=$(window).scrollTop(),$(window).off("scroll",w).on("scroll",w),e.height()<=$(window).height()&&f(1)};function w(){g&&clearTimeout(g),g=setTimeout(function(){g=0,D()},60)}function D(){const t=utils.findBootstrapEnvironment(),n=(t==="xs"||t==="sm")&&$("html").hasClass("composing");if(s||n||app.flags._glance)return;const e=$(window).scrollTop(),o=$(window).height(),i=h.height()-o,l=h.offset()?h.offset().top:0,r=100*(e-l)/(i<=0?o:i),P=15,_=85,T=e>u?1:-1;(r<P&&e<u||r>_&&e>u||r<0&&T>0&&i<0)&&f(T),u=e}return a.loadMore=function(t,n,e){if(s)return;s=!0;const o={method:t,data:n};m.fire("action:infinitescroll.loadmore",o),(o.method.startsWith("/")?y.get:socket.emit)(o.method,o.data,function(l,r){if(l)return s=!1,v.error(l);e(r,function(){s=!1})})},a.loadMoreXhr=function(t,n){if(s)return;s=!0;const e=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),o={url:e,data:t};m.fire("action:infinitescroll.loadmore.xhr",o),$.get(e,t,function(i){n(i,function(){s=!1})}).fail(function(i){s=!1,v.error(String(i.responseJSON||"[[error:no-connection]]"))})},a.removeExtra=function(t,n,e){let o=$();if(t.length<=e)return o;const i=t.length-e;if(n>0){const l=$(document).height(),r=$(window).scrollTop();o=t.slice(0,i).remove(),$(window).scrollTop(r+($(document).height()-l))}else o=t.slice(t.length-i).remove();return o},a}.apply(p,d),E!==void 0&&(O.exports=E)},49897:(O,p,c)=>{c.r(p),c.d(p,{del:()=>D,get:()=>u,head:()=>s,patch:()=>g,post:()=>h,put:()=>w});var d=c(91749),E=c.n(d),m=c(40027),v=c.n(m);const y=config.relative_path+"/api/v3";async function a(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:y+t.url,typeof n=="function"){f(t).then(e=>n(null,e),e=>n(e));return}try{return await f(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:o}=await(0,d.fire)("filter:admin.reauth",{url:"login"});return(0,m.confirm)("[[error:api.reauth-required]]",i=>{i&&ajaxify.go(o)})}throw e}}async function f(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,d.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:o}=e,i=o.get("content-type"),l=i&&i.startsWith("application/json");let r;if(t.method!=="HEAD"&&(l?r=await e.json():r=await e.text()),!e.ok)throw r?new Error(l?r.status.message:r):new Error(e.statusText);return l&&r&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r}function u(t,n,e){return a({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function s(t,n,e){return a({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},e)}function h(t,n,e){return a({url:t,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function g(t,n,e){return a({url:t,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function w(t,n,e){return a({url:t,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function D(t,n,e){return a({url:t,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
