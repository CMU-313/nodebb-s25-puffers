"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,15794,21374,25432,34271,49897,57490,63154,99127],{8454:(T,C,s)=>{var p,h;p=[s(24962),s(96352),s(52473),s(17459),s(34342),s(49897),s(40027),s(29930),s(91749),s(30076)],h=function(y,P,A,v,I,x,g,a,f,k){const m={};m.init=function(n){r(),u(n),y.addShareHandlers(ajaxify.data.titleRaw),I.addVoteHandler(),m.updatePostCount(ajaxify.data.postcount)};function r(){document.querySelector('[component="topic"]')&&$('[component="topic"]').on("show.bs.dropdown",'[component="post/tools"]',function(){const o=$(this),i=o.find(".dropdown-menu"),{top:d}=this.getBoundingClientRect();if(o.toggleClass("dropup",d>window.innerHeight/2),i.attr("data-loaded"))return;i.html(k.generatePlaceholderWave([3,5,9,7,10,"divider",10]));const l=o.parents("[data-pid]"),b=l.attr("data-pid"),R=parseInt(l.attr("data-index"),10);socket.emit("posts.loadPostTools",{pid:b},async(S,M)=>{if(S)return a.error(S);M.posts.display_move_tools=M.posts.display_move_tools&&R!==0;const H=await app.parseAndTranslate("partials/topic/post-menu-list",M),N=s(57576);i.attr("data-loaded","true").html(H),new N("[data-clipboard-text]"),f.fire("action:post.tools.load",{element:i})})})}function u(n){console.log(`Post handlers initialized for topic ID: ${n}`)}return m.toggle=function(n,o){const i=A.get("post","pid",n);i.find('[component="post/quote"], [component="post/bookmark"], [component="post/reply"], [component="post/flag"], [component="user/chat"]').toggleClass("hidden",o),i.find('[component="post/delete"]').toggleClass("hidden",o).parent().attr("hidden",o?"":null),i.find('[component="post/restore"]').toggleClass("hidden",!o).parent().attr("hidden",o?null:""),i.find('[component="post/purge"]').toggleClass("hidden",!o).parent().attr("hidden",o?null:""),m.removeMenu(i)},m.removeMenu=function(n){n.find('[component="post/tools"] .dropdown-menu').removeAttr("data-loaded").html("")},m.updatePostCount=function(n){A.get("topic/post-count").attr("title",n).html(k.humanReadableNumber(n)),P.setCount(n)},m.reactions=function(n,o){socket.emit("posts.reactions",n,o)},m.addReaction=function(n,o,i){socket.emit("posts.addReaction",{pid:n,reaction:o},i)},m.removeReaction=function(n,o,i){socket.emit("posts.removeReaction",{pid:n,reaction:o},i)},m.getReactionInfo=function(n,o){socket.emit("posts.getReactionInfo",n,o)},m}.apply(C,p),h!==void 0&&(T.exports=h)},24962:(T,C,s)=>{var p,h;p=[s(91749)],h=function(y){const P={},A=window.location.protocol+"//"+window.location.host;P.addShareHandlers=function(x){function g(a,f,k,m){return window.open(a,"_blank","width="+k+",height="+m+",scrollbars=no,status=no"),y.fire("action:share.open",{url:a,urlToPost:f}),!1}$("#content").off("shown.bs.dropdown",".share-dropdown").on("shown.bs.dropdown",".share-dropdown",function(){const a=$(this).find(".post-link");a.val(A+I($(this))),setTimeout(function(){a.putCursorAtEnd().select()},50)}),v(".post-link",function(a){return a.preventDefault(),!1}),v('[component="share/twitter"]',function(){const a=I($(this)),f=`https://twitter.com/intent/tweet?text=${encodeURIComponent(x)}&url=${encodeURIComponent(a)}`;return g(f,a,550,420)}),v('[component="share/facebook"]',function(){const a=I($(this)),f=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`;return g(f,a,626,436)}),v('[component="share/whatsapp"]',function(){const a=I($(this)),f=encodeURIComponent(x)+" - "+encodeURIComponent(a),k=config.useragent.isMobile?`whatsapp://send?text=${f}`:`https://wa.me/?text=${f}`;return g(k,a,626,436)}),v('[component="share/telegram"]',function(){const a=I($(this)),f=`https://t.me/share/url?text=${encodeURIComponent(x)}&url=${encodeURIComponent(a)}`;return g(f,a,626,436)}),v('[component="share/linkedin"]',function(){const a=I($(this)),f=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`;return g(f,a,626,436)}),y.fire("action:share.addHandlers",{openShare:g})};function v(x,g){$("#content").off("click",x).on("click",x,g)}function I(x){const g=parseInt(x.parents("[data-pid]").attr("data-pid"),10),a="/post"+(g?"/"+g:"");return A+config.relative_path+a}return P}.apply(C,p),h!==void 0&&(T.exports=h)},29869:T=>{T.exports=function(C,s,p){s.setGlobal("true",!0),s.setGlobal("false",!1);const h=24*60*60*1e3,y={displayMenuItem:A,buildMetaTag:v,buildLinkTag:I,stringify:x,escape:g,stripTags:a,buildCategoryIcon:f,buildCategoryLabel:k,generateCategoryBackground:m,generateChildrenCategories:r,generateTopicClass:u,membershipBtn:n,spawnPrivilegeStates:o,localeToHTML:i,renderTopicImage:d,renderDigestAvatar:l,userAgentIcons:b,buildAvatar:R,increment:S,generateWroteReplied:M,generateRepliedTo:H,generateWrote:N,isoTimeToLocaleString:V,shouldHideReplyContainer:F,humanReadableNumber:z,formattedNumber:G,generatePlaceholderWave:J,register:Y,__escape:P};function P(t){return t}function A(t,e){const c=t.navigation[e];return!(!c||c.route.match("/users")&&t.user&&!t.user.privileges["view:users"]||c.route.match("/tags")&&t.user&&!t.user.privileges["view:tags"]||c.route.match("/groups")&&t.user&&!t.user.privileges["view:groups"])}function v(t){const e=t.name?'name="'+t.name+'" ':"",c=t.property?'property="'+t.property+'" ':"",E=t.content?'content="'+t.content.replace(/\n/g," ")+'" ':"";return"<meta "+e+c+E+`/>
	`}function I(t){const e=["link","rel","as","type","href","sizes","title","crossorigin"],[c,E,w,U,W,B,D,K]=e.map(L=>t[L]?`${L}="${t[L]}" `:"");return"<link "+c+E+w+U+B+D+W+K+`/>
	`}function x(t){return JSON.stringify(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function g(t){return C.escapeHTML(t)}function a(t){return C.stripHTMLTags(t)}function f(t,e,c){return t?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${c}" style="${m(t)} width:${e}; height: ${e}; font-size: ${parseInt(e,10)/2}px;">${t.icon?`<i class="fa fa-fw ${t.icon}"></i>`:""}</span>`:""}function k(t,e="a",c=""){if(!t)return"";const E=e==="a"?`href="${p}/category/${t.slug}"`:"";return`<${e} ${E} class="badge px-1 text-truncate text-decoration-none ${c}" style="color: ${t.color};background-color: ${t.bgColor};border-color: ${t.bgColor}!important; max-width: 70vw;">
			${t.icon&&t.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${t.icon}"></i>`:""}
			${t.name}
		</${e}>`}function m(t){if(!t)return"";const e=[];return t.bgColor&&(e.push("background-color: "+t.bgColor),e.push(`border-color: ${t.bgColor}!important`)),t.color&&e.push("color: "+t.color),t.backgroundImage&&(e.push("background-image: url("+t.backgroundImage+")"),t.imageClass&&e.push("background-size: "+t.imageClass)),e.join("; ")+";"}function r(t){let e="";return!t||!t.children||!t.children.length||(t.children.forEach(function(c){if(c&&!c.isSection){const E=c.link?c.link:p+"/category/"+c.slug;e+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+m(c)+'"><i class="fa fa-fw '+c.icon+'"></i></div><a href="'+E+'"><small>'+c.name+"</small></a></span>"}}),e=e&&'<span class="category-children">'+e+"</span>"),e}function u(t){return["locked","pinned","deleted","unread","scheduled"].filter(c=>!!t[c]).join(" ")}function n(t,e=""){return t.isMember&&t.name!=="administrators"?`<button class="btn btn-danger ${e}" data-action="leave" data-group="${t.displayName}" ${t.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:t.isPending&&t.name!=="administrators"?`<button class="btn btn-warning disabled ${e}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:t.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${t.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${t.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!t.disableJoinRequests&&t.name!=="administrators"?`<button class="btn btn-success ${e}" data-action="join" data-group="${t.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function o(t,e,c){const E=[];for(const w in e)e.hasOwnProperty(w)&&E.push({name:w,state:e[w],type:c[w]});return E.map(function(w){const U=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],W=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],B=["groups:moderate"],D=t==="guests"&&(U.includes(w.name)||w.name.startsWith("groups:admin:"))||t==="spiders"&&!W.includes(w.name)||t==="Global Moderators"&&B.includes(w.name);return`
				<td data-privilege="${w.name}" data-value="${w.state}" data-type="${w.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${w.state?" checked":""}${D?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function i(t,e){return t=t||e||"en-GB",t.replace("_","-")}function d(t){return t.thumb?'<img src="'+t.thumb+'" class="img-circle user-img" title="'+t.user.username+'" />':'<img component="user/picture" data-uid="'+t.user.uid+'" src="'+t.user.picture+'" class="user-img" title="'+t.user.username+'" />'}function l(t){return t.teaser?t.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.teaser.user.picture+'" title="'+t.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.teaser.user["icon:text"]+"</div>":t.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.user.picture+'" title="'+t.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.user["icon:text"]+"</div>"}function b(t){let e="";switch(t.platform){case"Linux":e+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":e+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":e+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":e+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":e+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":e+='<i class="fa fa-fw fa-mobile"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(t.browser){case"Chrome":e+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":e+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":e+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":e+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":e+='<i class="fa fa-fw fa-edge"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>';break}return e}function R(t,e,c,E,w){t||(t=this),E=E||"";const U=new Map([["title",t.username],["data-uid",t.uid],["class",`avatar ${E}${c?" avatar-rounded":""}`]]),W=[`--avatar-size: ${e};`],B=K=>Array.from(K).reduce((L,[j,Q])=>(L+=` ${j}="${Q}"`,L),"");let D="";return t.picture&&(D+=`<img${B(U)} alt="${t.username}" loading="lazy" component="${w||"avatar/picture"}" src="${t.picture}" style="${W.join(" ")}" onError="this.remove()" itemprop="image" />`),D+=`<span${B(U)} component="${w||"avatar/icon"}" style="${W.join(" ")} background-color: ${t["icon:bgColor"]}">${t["icon:text"]}</span>`,D}function S(t,e){return String(t+parseInt(e,10))}function M(t,e){return t.toPid?H(t,e):N(t,e)}function H(t,e){const c=t.parent&&t.parent.displayname?t.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${t.timestamp<Date.now()-e*h?"on":"ago"}, ${t.toPid}, ${p}/post/${t.toPid}, ${c}, ${p}/post/${t.pid}, ${t.timestampISO}]]`}function N(t,e){return`[[topic:wrote-${t.timestamp<Date.now()-e*h?"on":"ago"}, ${p}/post/${t.pid}, ${t.timestampISO}]]`}function V(t,e="en-GB"){return new Date(t).toLocaleString([e],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function F(t){return!!(t.replies.count<=0||t.replies.hasSingleImmediateReply)}function z(t,e=1){return C.makeNumberHumanReadable(t,e)}function G(t){return C.addCommas(t)}function J(t){return t.map(c=>c==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${c}"></div>
			</li>`)}function Y(){Object.keys(y).forEach(function(t){s.registerHelper(t,y[t])})}return y}},30076:(T,C,s)=>{var p,h;const y=s(29869);p=[s(77918),s(81335)],h=function(P,A){return y(P,A,config.relative_path)}.apply(C,p),h!==void 0&&(T.exports=h)},34342:(T,C,s)=>{var p,h;p=[s(52473),s(17459),s(49897),s(91749),s(40027),s(29930),s(89336)],h=function(y,P,A,v,I,x,g){const a={};let f={};a.addVoteHandler=function(){f={},k()&&(y.get("topic").on("mouseenter",'[data-pid] [component="post/vote-count"]',u),y.get("topic").on("mouseleave",'[data-pid] [component="post/vote-count"]',r))};function k(){const{upvoteVisibility:o,privileges:i}=ajaxify.data;return i.isAdminOrMod||o==="all"||o==="loggedin"&&config.loggedIn}function m(){const{upvoteVisibility:o,downvoteVisibility:i,privileges:d}=ajaxify.data;return d.isAdminOrMod||o==="all"||i==="all"||(o==="loggedin"||i==="loggedin")&&config.loggedIn}function r(){const o=$(this),i=o.parents("[data-pid]").attr("data-pid"),d=g.Tooltip.getInstance(this);d&&(d.dispose(),o.attr("title","")),f[i]=!1}function u(){const o=$(this),d=o.parent().parents("[data-pid]").attr("data-pid");f[d]=!0;const l=g.Tooltip.getInstance(this);l&&(l.dispose(),o.attr("title","")),A.get(`/posts/${d}/upvoters`,{},function(b,R){if(b)return x.error(b);f[d]&&R&&n(o,R)})}function n(o,i){function d(b){o.attr("title",b),new g.Tooltip(o,{container:"#content",html:!0}).show()}let l=i.usernames.filter(b=>b!=="[[global:former-user]]");l.length&&(l.length+i.otherCount>i.cutoff?(l=l.join(", ").replace(/,/g,"|"),P.translate("[[topic:users-and-others, "+l+", "+i.otherCount+"]]",function(b){b=b.replace(/\|/g,","),d(b)})):(l=l.join(", "),d(l)))}return a.toggleVote=function(o,i,d){const l=o.closest("[data-pid]"),R=l.find(i).length?"del":"put",S=l.attr("data-pid");return A[R](`/posts/${S}/vote`,{delta:d},function(M){if(M){if(!app.user.uid){ajaxify.go("login");return}return x.error(M)}v.fire("action:post.toggleVote",{pid:S,delta:d,unvote:R==="del"})}),!1},a.showVotes=function(o){m()&&A.get(`/posts/${o}/voters`,{},function(i,d){if(i)return x.error(i);app.parseAndTranslate("modals/votes",d,function(l){const b=I.dialog({title:"[[global:voters]]",message:l,className:"vote-modal",show:!0,onEscape:!0,backdrop:!0});b.on("click",function(){b.modal("hide")})})})},a}.apply(C,p),h!==void 0&&(T.exports=h)},49897:(T,C,s)=>{s.r(C),s.d(C,{del:()=>m,get:()=>x,head:()=>g,patch:()=>f,post:()=>a,put:()=>k});var p=s(91749),h=s.n(p),y=s(40027),P=s.n(y);const A=config.relative_path+"/api/v3";async function v(r,u){if(r.url=r.url.startsWith("/api")?config.relative_path+r.url:A+r.url,typeof u=="function"){I(r).then(n=>u(null,n),n=>u(n));return}try{return await I(r)}catch(n){if(n.message==="A valid login session was not found. Please log in and try again."){const{url:o}=await(0,p.fire)("filter:admin.reauth",{url:"login"});return(0,y.confirm)("[[error:api.reauth-required]]",i=>{i&&ajaxify.go(o)})}throw n}}async function I(r){const{url:u}=r;delete r.url,r.data&&!(r.data instanceof FormData)&&(r.data=JSON.stringify(r.data||{}),r.headers["content-type"]="application/json; charset=utf-8"),{options:r}=await(0,p.fire)("filter:api.options",{options:r}),r.data&&(r.body=r.data,delete r.data);const n=await fetch(u,r),{headers:o}=n,i=o.get("content-type"),d=i&&i.startsWith("application/json");let l;if(r.method!=="HEAD"&&(d?l=await n.json():l=await n.text()),!n.ok)throw l?new Error(d?l.status.message:l):new Error(n.statusText);return d&&l&&l.hasOwnProperty("status")&&l.hasOwnProperty("response")?l.response:l}function x(r,u,n){return v({url:r+(u&&Object.keys(u).length?"?"+$.param(u):"")},n)}function g(r,u,n){return v({url:r+(u&&Object.keys(u).length?"?"+$.param(u):""),method:"HEAD"},n)}function a(r,u,n){return v({url:r,method:"POST",data:u,headers:{"x-csrf-token":config.csrf_token}},n)}function f(r,u,n){return v({url:r,method:"PATCH",data:u,headers:{"x-csrf-token":config.csrf_token}},n)}function k(r,u,n){return v({url:r,method:"PUT",data:u,headers:{"x-csrf-token":config.csrf_token}},n)}function m(r,u,n){return v({url:r,method:"DELETE",data:u,headers:{"x-csrf-token":config.csrf_token}},n)}}}]);
