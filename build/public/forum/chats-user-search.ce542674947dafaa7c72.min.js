"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[37147,99127,34271,1091,49897],{53309:(P,l,a)=>{var h,d;h=[a(52473),a(49897),a(29930)],d=function(i,v,p){const u={};let o=[];u.init=function(r){r=r||{},o.length=0,i.get("chat/search").on("keyup",utils.debounce(E,250));const s=$('[component="chat/search/list"]');s.on("click","[data-uid]",function(){r.onSelect&&r.onSelect(o.find(e=>parseInt(e.uid,10)===parseInt($(this).attr("data-uid"),10))),f(s)})};function f(r){i.get("chat/search").val(""),g(r),r.find('[component="chat/search/no-users"]').addClass("hidden"),r.find('[component="chat/search/start-typing"]').removeClass("hidden")}function E(){const r=$('[component="chat/search/list"]'),s=i.get("chat/search").val();if(!s)return f(r);r.find('[component="chat/search/start-typing"]').addClass("hidden"),v.get("/api/users",{query:s,searchBy:"username",paginate:!1}).then(y).catch(p.error)}function g(r){o.length=0,r.find("[data-uid]").remove()}async function y(r){const s=$('[component="chat/search/list"]');if(g(s),r.users=r.users.filter(function(n){return parseInt(n.uid,10)!==parseInt(app.user.uid,10)}),o=r.users,!r.users.length)return s.find('[component="chat/search/no-users"]').removeClass("hidden");s.find('[component="chat/search/no-users"]').addClass("hidden");const e=await app.parseAndTranslate("modals/create-room","searchUsers",{searchUsers:r.users});s.append(e),s.parent().toggleClass("show",!0)}return u}.apply(l,h),d!==void 0&&(P.exports=d)},49897:(P,l,a)=>{a.r(l),a.d(l,{del:()=>s,get:()=>f,head:()=>E,patch:()=>y,post:()=>g,put:()=>r});var h=a(91749),d=a.n(h),i=a(40027),v=a.n(i);const p=config.relative_path+"/api/v3";async function u(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:p+e.url,typeof n=="function"){o(e).then(t=>n(null,t),t=>n(t));return}try{return await o(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again."){const{url:A}=await(0,h.fire)("filter:admin.reauth",{url:"login"});return(0,i.confirm)("[[error:api.reauth-required]]",m=>{m&&ajaxify.go(A)})}throw t}}async function o(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,h.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:A}=t,m=A.get("content-type"),D=m&&m.startsWith("application/json");let c;if(e.method!=="HEAD"&&(D?c=await t.json():c=await t.text()),!t.ok)throw c?new Error(D?c.status.message:c):new Error(t.statusText);return D&&c&&c.hasOwnProperty("status")&&c.hasOwnProperty("response")?c.response:c}function f(e,n,t){return u({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function E(e,n,t){return u({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},t)}function g(e,n,t){return u({url:e,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function y(e,n,t){return u({url:e,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function r(e,n,t){return u({url:e,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function s(e,n,t){return u({url:e,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}}}]);
