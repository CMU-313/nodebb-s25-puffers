"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,82858,95738,99127],{22410:(w,T,f)=>{var d,g;d=[f(91749),f(29930),f(49897)],g=function(p,_,m){const c={};let u,s=0,o=!1,l,E=0;c.init=function(t,n){const e=$("body");typeof t=="function"?(u=t,l=e):(u=n,l=t||e),s=$(window).scrollTop(),$(window).off("scroll",v).on("scroll",v),e.height()<=$(window).height()&&u(1)};function v(){E&&clearTimeout(E),E=setTimeout(function(){E=0,A()},60)}function A(){const t=utils.findBootstrapEnvironment(),n=(t==="xs"||t==="sm")&&$("html").hasClass("composing");if(o||n||app.flags._glance)return;const e=$(window).scrollTop(),r=$(window).height(),i=l.height()-r,h=l.offset()?l.offset().top:0,a=100*(e-h)/(i<=0?r:i),D=15,M=85,y=e>s?1:-1;(a<D&&e<s||a>M&&e>s||a<0&&y>0&&i<0)&&u(y),s=e}return c.loadMore=function(t,n,e){if(o)return;o=!0;const r={method:t,data:n};p.fire("action:infinitescroll.loadmore",r),(r.method.startsWith("/")?m.get:socket.emit)(r.method,r.data,function(h,a){if(h)return o=!1,_.error(h);e(a,function(){o=!1})})},c.loadMoreXhr=function(t,n){if(o)return;o=!0;const e=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),r={url:e,data:t};p.fire("action:infinitescroll.loadmore.xhr",r),$.get(e,t,function(i){n(i,function(){o=!1})}).fail(function(i){o=!1,_.error(String(i.responseJSON||"[[error:no-connection]]"))})},c.removeExtra=function(t,n,e){let r=$();if(t.length<=e)return r;const i=t.length-e;if(n>0){const h=$(document).height(),a=$(window).scrollTop();r=t.slice(0,i).remove(),$(window).scrollTop(a+($(document).height()-h))}else r=t.slice(t.length-i).remove();return r},c}.apply(T,d),g!==void 0&&(w.exports=g)},31042:(w,T,f)=>{var d,g;d=[f(22410),f(29930)],g=function(p,_){const m={};m.init=function(){app.enterRoom("tags"),$("#tag-search").on("input propertychange",utils.debounce(function(){if(!$("#tag-search").val().length)return c();socket.emit("topics.searchAndLoadTags",{query:$("#tag-search").val()},function(s,o){if(s)return _.error(s);u(o.tags,!0)})},250)),p.init(m.loadMoreTags)},m.loadMoreTags=function(s){s<0||!$(".tag-list").length||$("#tag-search").val()||p.loadMore("topics.loadMoreTags",{after:$(".tag-list").attr("data-nextstart")},function(o,l){o&&o.tags&&o.tags.length?(u(o.tags,!1,l),$(".tag-list").attr("data-nextstart",o.nextStart)):l()})};function c(){socket.emit("topics.loadMoreTags",{after:0},function(s,o){if(s)return _.error(s);u(o.tags,!0)})}function u(s,o,l){l=l||function(){},app.parseAndTranslate("tags","tags",{tags:s},function(E){$(".tag-list")[o?"html":"append"](E),l()})}return m}.apply(T,d),g!==void 0&&(w.exports=g)},49897:(w,T,f)=>{f.r(T),f.d(T,{del:()=>A,get:()=>s,head:()=>o,patch:()=>E,post:()=>l,put:()=>v});var d=f(91749),g=f.n(d),p=f(40027),_=f.n(p);const m=config.relative_path+"/api/v3";async function c(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:m+t.url,typeof n=="function"){u(t).then(e=>n(null,e),e=>n(e));return}try{return await u(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:r}=await(0,d.fire)("filter:admin.reauth",{url:"login"});return(0,p.confirm)("[[error:api.reauth-required]]",i=>{i&&ajaxify.go(r)})}throw e}}async function u(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,d.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:r}=e,i=r.get("content-type"),h=i&&i.startsWith("application/json");let a;if(t.method!=="HEAD"&&(h?a=await e.json():a=await e.text()),!e.ok)throw a?new Error(h?a.status.message:a):new Error(e.statusText);return h&&a&&a.hasOwnProperty("status")&&a.hasOwnProperty("response")?a.response:a}function s(t,n,e){return c({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function o(t,n,e){return c({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},e)}function l(t,n,e){return c({url:t,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function E(t,n,e){return c({url:t,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function v(t,n,e){return c({url:t,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function A(t,n,e){return c({url:t,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
