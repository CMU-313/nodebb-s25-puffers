"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[78289,53020,99127,95737,34271,13417,1091,25432,15794,26174,49897,34405],{91847:(I,A,u)=>{var p,h;p=[u(17459),u(81335),u(34405),u(49897),u(13230),u(40027),u(29930),u(30637),u(30076),u(86296)],h=function(E,v,C,g,P,f,r,y,w,b){const x={};x.init=function(){$("#results-per-page").val(ajaxify.data.resultsPerPage).on("change",function(){const a=utils.params();a.resultsPerPage=$("#results-per-page").val();const e=M(a);ajaxify.go(window.location.pathname+"?"+e)}),$(".export-csv").on("click",function(){socket.once("event:export-users-csv",function(){r.remove("export-users-start"),r.alert({alert_id:"export-users",type:"success",title:"[[global:alert.success]]",message:"[[admin/manage/users:export-users-completed]]",clickfn:function(){window.location.href=config.relative_path+"/api/admin/users/csv"},timeout:0})});const e=[{label:"[[admin/manage/users:export-field-email]]",field:"email",selected:!0},{label:"[[admin/manage/users:export-field-username]]",field:"username",selected:!0},{label:"[[admin/manage/users:export-field-uid]]",field:"uid",selected:!0},{label:"[[admin/manage/users:export-field-ip]]",field:"ip",selected:!0},{label:"[[admin/manage/users:export-field-joindate]]",field:"joindate",selected:!1},{label:"[[admin/manage/users:export-field-lastonline]]",field:"lastonline",selected:!1},{label:"[[admin/manage/users:export-field-lastposttime]]",field:"lastposttime",selected:!1},{label:"[[admin/manage/users:export-field-reputation]]",field:"reputation",selected:!1},{label:"[[admin/manage/users:export-field-postcount]]",field:"postcount",selected:!1},{label:"[[admin/manage/users:export-field-topiccount]]",field:"topiccount",selected:!1},{label:"[[admin/manage/users:export-field-profileviews]]",field:"profileviews",selected:!1},{label:"[[admin/manage/users:export-field-followercount]]",field:"followerCount",selected:!1},{label:"[[admin/manage/users:export-field-followingcount]]",field:"followingCount",selected:!1},{label:"[[admin/manage/users:export-field-fullname]]",field:"fullname",selected:!1},{label:"[[admin/manage/users:export-field-website]]",field:"website",selected:!1},{label:"[[admin/manage/users:export-field-location]]",field:"location",selected:!1},{label:"[[admin/manage/users:export-field-birthday]]",field:"birthday",selected:!1},{label:"[[admin/manage/users:export-field-signature]]",field:"signature",selected:!1},{label:"[[admin/manage/users:export-field-aboutme]]",field:"aboutme",selected:!1}].map((s,i)=>`
				<div class="form-check mb-2">
					<input data-field="${s.field}" class="form-check-input" type="checkbox" id="option-${i}" ${s.selected?"checked":""}>
					<label class="form-check-label" for="option-${i}">
						${s.label}
					</label>
				</div>`).join(""),n=f.dialog({message:e,title:"[[admin/manage/users:export-users-fields-title]]",buttons:{submit:{label:"[[admin/manage/users:export]]",callback:function(){const s=n.find("[data-field]").filter((i,l)=>$(l).is(":checked")).map((i,l)=>$(l).attr("data-field")).get();socket.emit("admin.user.exportUsersCSV",{fields:s},function(i){if(i)return r.error(i);r.alert({alert_id:"export-users-start",message:"[[admin/manage/users:export-users-started]]",timeout:Math.max(5e3,ajaxify.data.userCount/5e3*500)})})}}}});return!1});function o(){const a=[];return $('.users-table [component="user/select/single"]').each(function(){$(this).is(":checked")&&a.push($(this).attr("data-uid"))}),a}function d(a,e){$('.users-table [component="user/select/single"]:checked').parents(".user-row").find(a).each(function(){$(this).toggleClass("hidden",!e)})}function D(){$('.users-table [component="user/select/single"]').prop("checked",!1),$('.users-table [component="user/select/all"]').prop("checked",!1)}function S(a){const e=document.querySelector(`.users-table [component="user/select/single"][data-uid="${a}"]`);if(e){const n=e.closest(".user-row");n.parentNode.removeChild(n)}}function T(a,e,n){return function(s){if(s)return r.error(s);r.success(a),e&&d(e,n),D()}}function F(a,e,n){r.success(a),e&&d(e,n),D()}$('[component="user/select/all"]').on("click",function(){$('.users-table [component="user/select/single"]').prop("checked",$(this).is(":checked"))}),$(".manage-groups").on("click",function(){const a=o();if(!a.length)return r.error("[[error:no-users-selected]]"),!1;socket.emit("admin.user.loadGroups",a,function(e,n){if(e)return r.error(e);v.render("admin/partials/manage_user_groups",n).then(function(s){const i=f.dialog({message:s,title:"[[admin/manage/users:manage-groups]]",onEscape:!0});i.on("shown.bs.modal",function(){C.group(i.find(".group-search"),function(l,k){const B=$(l.target).attr("data-uid");g.put("/groups/"+k.item.group.slug+"/membership/"+B,void 0).then(()=>{k.item.group.nameEscaped=E.escape(k.item.group.displayName),app.parseAndTranslate("admin/partials/manage_user_groups",{users:[{groups:[k.item.group]}]},function(L){$("[data-uid="+B+"] .group-area").append(L.find(".group-area").html())})}).catch(r.error)})}),i.on("click",".group-area a",function(){i.modal("hide")}),i.on("click",".remove-group-icon",function(){const l=$(this).parents("[data-group-name]"),k=l.attr("data-group-name"),B=$(this).parents("[data-uid]").attr("data-uid");return g.del("/groups/"+P(k)+"/membership/"+B).then(()=>{l.remove()}).catch(r.error),!1})})})}),$(".set-reputation").on("click",function(){const a=o();if(!a.length)return r.error("[[error:no-users-selected]]"),!1;let e="";if(a.length===1){const s=ajaxify.data.users.find(i=>i&&i.uid===parseInt(a[0],10));s&&(e=String(s.reputation))}const n=f.dialog({message:`<input id="new-reputation" type="text" class="form-control" value="${e}">`,title:"[[admin/manage/users:set-reputation]]",onEscape:!0,buttons:{submit:{label:"[[global:save]]",callback:function(){const s=n.find("#new-reputation").val();if(!utils.isNumber(s))return r.error("[[error:invalid-data]]"),!1;socket.emit("admin.user.setReputation",{value:s,uids:a}).then(()=>{a.forEach(i=>{$(`[component="user/reputation"][data-uid="${i}"]`).text(w.formattedNumber(s));const l=ajaxify.data.users.find(k=>k&&k.uid===parseInt(i,10));l&&(l.reputation=s)})}).catch(r.error)}}}});n.on("shown.bs.modal",()=>{n.find("#new-reputation").selectRange(0,n.find("#new-reputation").val().length)})}),$(".ban-user").on("click",function(){const a=o();if(!a.length)return r.error("[[error:no-users-selected]]"),!1;f.confirm(a.length>1?"[[admin/manage/users:alerts.confirm-ban-multi]]":"[[admin/manage/users:alerts.confirm-ban]]",function(e){e&&Promise.all(a.map(function(n){return g.put("/users/"+n+"/ban")})).then(()=>{F("[[admin/manage/users:alerts.ban-success]]",".ban",!0)}).catch(r.error)})}),$(".ban-user-temporary").on("click",function(){const a=o();if(!a.length)return r.error("[[error:no-users-selected]]"),!1;v.render("modals/temporary-ban",{}).then(function(e){const n=f.dialog({title:"[[user:ban-account]]",message:e,show:!0,onEscape:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[admin/manage/users:alerts.button-ban-x, "+a.length+"]]",callback:function(){const s=n.find("form").serializeArray().reduce(function(l,k){return l[k.name]=k.value,l},{}),i=s.length>0?Date.now()+s.length*1e3*60*60*(parseInt(s.unit,10)?24:1):0;Promise.all(a.map(function(l){return g.put("/users/"+l+"/ban",{until:i,reason:s.reason})})).then(()=>{F("[[admin/manage/users:alerts.ban-success]]",".ban",!0)}).catch(r.error)}}}})})}),$(".unban-user").on("click",function(){const a=o();if(!a.length)return r.error("[[error:no-users-selected]]"),!1;v.render("modals/unban",{}).then(function(e){const n=f.dialog({title:"[[user:unban-account]]",message:e,show:!0,onEscape:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[user:unban-account]]",callback:function(){const s=n.find("form").serializeArray().reduce(function(i,l){return i[l.name]=l.value,i},{});Promise.all(a.map(function(i){return g.del("/users/"+i+"/ban",{reason:s.reason||""})})).then(()=>{F("[[admin/manage/users:alerts.unban-success]]",".ban",!1)}).catch(r.error)}}}})})}),$(".reset-lockout").on("click",function(){const a=o();a.length&&socket.emit("admin.user.resetLockouts",a,T("[[admin/manage/users:alerts.lockout-reset-success]]"))}),$(".change-email").on("click",function(){const a=o();if(a.length!==1)return r.error("[[admin/manage/users:alerts.select-a-single-user-to-change-email]]");b.init({uid:a[0],onSuccess:function(e){d(".notvalidated",!1),d(".pending",!1),d(".expired",!1),d(".validated",!1),d(".validated-by-admin",!!e),d(".no-email",!e),$('.users-table [component="user/select/single"]:checked').parents(".user-row").find(".validated-by-admin .email").text(e)}})}),$(".validate-email").on("click",function(){const a=o();a.length&&f.confirm("[[admin/manage/users:alerts.confirm-validate-email]]",function(e){e&&socket.emit("admin.user.validateEmail",a,function(n){if(n)return r.error(n);r.success("[[admin/manage/users:alerts.validate-email-success]]"),d(".notvalidated",!1),d(".pending",!1),d(".expired",!1),d(".validated",!1),d(".validated-by-admin",!0),D()})})}),$(".send-validation-email").on("click",function(){const a=o();a.length&&socket.emit("admin.user.sendValidationEmail",a,function(e){if(e)return r.error(e);r.success("[[notifications:email-confirm-sent]]")})}),$(".change-password").on("click",async function(){const a=o();if(!a.length)return;async function e(s){const i=s.find("#newPassword").val(),l=s.find("#confirmPassword").val();if(i!==l)throw new Error("[[[user:change-password-error-match]]");await Promise.all(a.map(k=>g.put("/users/"+k+"/password",{currentPassword:"",newPassword:i})))}const n=f.dialog({message:`<div class="d-flex flex-column gap-2">
					<label class="form-label">[[user:new-password]]</label>
					<input id="newPassword" class="form-control" type="text">
					<label class="form-label">[[user:confirm-password]]</label>
					<input id="confirmPassword" class="form-control" type="text">
				</div>`,title:"[[admin/manage/users:change-password]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){return e(n).then(()=>{n.modal("hide")}).catch(r.error),!1}}}})}),$(".password-reset-email").on("click",function(){const a=o();a.length&&f.confirm("[[admin/manage/users:alerts.password-reset-confirm]]",function(e){e&&socket.emit("admin.user.sendPasswordResetEmail",a,T("[[admin/manage/users:alerts.password-reset-email-sent]]"))})}),$(".force-password-reset").on("click",function(){const a=o();a.length&&f.confirm("[[admin/manage/users:alerts.confirm-force-password-reset]]",function(e){e&&socket.emit("admin.user.forcePasswordReset",a,T("[[admin/manage/users:alerts.validate-force-password-reset-success]]"))})}),$(".delete-user").on("click",()=>{K("[[admin/manage/users:alerts.confirm-delete]]","/account")}),$(".delete-user-content").on("click",()=>{K("[[admin/manage/users:alerts.confirm-delete-content]]","/content")}),$(".delete-user-and-content").on("click",()=>{K("[[admin/manage/users:alerts.confirm-purge]]","")});const H=document.querySelector(".users-table"),j=document.getElementById("action-dropdown");H.addEventListener("change",a=>{(a.target.closest('[component="user/select/single"]')||a.target.closest('[component="user/select/all"]'))&&(o().length?j.removeAttribute("disabled"):j.setAttribute("disabled","disabled"))});function K(a,e){const n=o();n.length&&f.confirm(a,function(s){s&&Promise.all(n.map(i=>g.del(`/users/${i}${e}`,{}).then(()=>{e!=="/content"&&S(i)}))).then(()=>{e!=="/content"?r.success("[[admin/manage/users:alerts.delete-success]]"):r.success("[[admin/manage/users:alerts.delete-content-success]]"),D(),$('.users-table [component="user/select/single"]').length||ajaxify.refresh()}).catch(r.error)})}function z(){$('[data-action="create"]').on("click",function(){return v.render("admin/partials/create_user_modal",{}).then(function(a){const e=f.dialog({message:a,title:"[[admin/manage/users:alerts.create]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},create:{label:"[[admin/manage/users:alerts.button-create]]",className:"btn-primary",callback:function(){return J.call(this),!1}}}});e.on("shown.bs.modal",function(){e.find("#create-user-name").focus()})}),!1})}function J(){const a=this,e=document.getElementById("create-user-name").value,n=document.getElementById("create-user-email").value,s=document.getElementById("create-user-password").value,i=document.getElementById("create-user-password-again").value,l=$("#create-modal-error");if(s!==i)return l.translateHtml("[[admin/manage/users:alerts.error-x, [[admin/manage/users:alerts.error-passwords-different]]]]").removeClass("hide");const k={username:e,email:n,password:s};g.post("/users",k).then(()=>{a.modal("hide"),a.on("hidden.bs.modal",function(){ajaxify.refresh()}),r.success("[[admin/manage/users:alerts.create-success]]")}).catch(B=>l.translateHtml("[[admin/manage/users:alerts.error-x, "+B.message+"]]").removeClass("hidden"))}t(),z(),_(),R(),y.handle()};function t(){function o(){$(".fa-spinner").removeClass("hidden"),m({searchBy:$("#user-search-by").val(),query:$("#user-search").val(),page:1})}$("#user-search").on("keyup",utils.debounce(o,250)),$("#user-search-by").on("change",o)}function m(o){const d=utils.params();d.searchBy=o.searchBy,d.query=o.query,d.page=o.page,d.sortBy=d.sortBy||"lastonline";const D=decodeURIComponent($.param(d));$.get(config.relative_path+"/api/admin/manage/users?"+D,function(S){c(S);const T=config.relative_path+"/admin/manage/users?"+D;history.pushState&&history.pushState({url:T},null,window.location.protocol+"//"+window.location.host+T)}).fail(function(S){S&&S.responseJSON&&S.responseJSON.error&&r.error(S.responseJSON.error)})}function c(o){v.render("partials/paginator",{pagination:o.pagination}).then(function(d){$(".pagination-container").replaceWith(d)}),app.parseAndTranslate("admin/manage/users","users",o,function(d){if($(".users-table tbody tr").remove(),$(".users-table tbody").append(d),d.find(".timeago").timeago(),$(".fa-spinner").addClass("hidden"),!$("#user-search").val()){$("#user-found-notify").addClass("hidden"),$("#user-notfound-notify").addClass("hidden");return}o&&o.users.length===0?($("#user-notfound-notify").translateHtml("[[admin/manage/users:search.not-found]]").removeClass("hidden"),$("#user-found-notify").addClass("hidden")):($("#user-found-notify").translateHtml(E.compile("admin/manage/users:alerts.x-users-found",o.matchCount,o.timing)).removeClass("hidden"),$("#user-notfound-notify").addClass("hidden"))})}function M(o){return $("#user-search").val()?(o.query=$("#user-search").val(),o.searchBy=$("#user-search-by").val()):(delete o.query,delete o.searchBy),decodeURIComponent($.param(o))}function _(){$(".users-table thead th").on("click",function(){const d=$(this).attr("data-sort");if(!d)return;const D=utils.params();D.sortBy=d,ajaxify.data.sortBy===d?D.sortDirection=ajaxify.data.reverse?"asc":"desc":D.sortDirection="desc";const S=M(D);ajaxify.go("admin/manage/users?"+S)})}function N(){const o=[];return $("#filter-by").find("[data-filter-by]").each(function(){$(this).find(".fa-check").length&&o.push($(this).attr("data-filter-by"))}),o}function R(){let o=N();$("#filter-by").on("click","li",function(){const d=$(this);return d.find("i").toggleClass("fa-check",!d.find("i").hasClass("fa-check")),!1}),$("#filter-by").on("hidden.bs.dropdown",function(){const d=N();let D=d.length!==o.length;if(d.length===o.length&&d.forEach(function(S,T){S!==o[T]&&(D=!0)}),o=N(),D){const S=utils.params();S.filters=d;const T=M(S);ajaxify.go("admin/manage/users?"+T)}})}return x}.apply(A,p),h!==void 0&&(I.exports=h)},86296:(I,A,u)=>{var p,h;p=[u(49897),u(40027),u(29930)],h=function(E,v,C){const g={};return g.init=function(P){const f=v.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(P.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const r=f.find("#newEmail").val();return E.post("/users/"+P.uid+"/emails",{skipConfirmation:!0,email:r}).then(()=>{f.modal("hide"),P.onSuccess(r)}).catch(C.error),!1}}}})},g}.apply(A,p),h!==void 0&&(I.exports=h)},30637:(I,A,u)=>{var p,h;p=[u(49897),u(81335),u(40027),u(29930)],h=function(E,v,C,g){const P={};function f(){return ajaxify.data.template.name.startsWith("admin/")}return P.handle=function(){$('[component="user/invite"]').on("click",function(r){r.preventDefault(),E.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(y=>{v.parse("modals/invite",{groups:y},function(w){C.dialog({message:w,title:`[[${f()?"admin/manage/users:invite":"users:invite"}]]`,onEscape:!0,buttons:{cancel:{label:`[[${f()?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${f()?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:P.send}}})})}).catch(g.error)})},P.send=function(){const r=$("#invite-modal-emails"),y=$("#invite-modal-groups"),w={emails:r.val().split(",").map(b=>b.trim()).filter(Boolean).filter((b,x,t)=>x===t.indexOf(b)).join(","),groupsToJoin:y.val()};w.emails&&E.post(`/users/${app.user.uid}/invites`,w).then(()=>{g.success(`[[${f()?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${w.emails.replace(/,/g,"&#44; ")}]]`)}).catch(g.error)},P}.apply(A,p),h!==void 0&&(I.exports=h)},49897:(I,A,u)=>{u.r(A),u.d(A,{del:()=>x,get:()=>f,head:()=>r,patch:()=>w,post:()=>y,put:()=>b});var p=u(91749),h=u.n(p),E=u(40027),v=u.n(E);const C=config.relative_path+"/api/v3";async function g(t,m){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:C+t.url,typeof m=="function"){P(t).then(c=>m(null,c),c=>m(c));return}try{return await P(t)}catch(c){if(c.message==="A valid login session was not found. Please log in and try again."){const{url:M}=await(0,p.fire)("filter:admin.reauth",{url:"login"});return(0,E.confirm)("[[error:api.reauth-required]]",_=>{_&&ajaxify.go(M)})}throw c}}async function P(t){const{url:m}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,p.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const c=await fetch(m,t),{headers:M}=c,_=M.get("content-type"),N=_&&_.startsWith("application/json");let R;if(t.method!=="HEAD"&&(N?R=await c.json():R=await c.text()),!c.ok)throw R?new Error(N?R.status.message:R):new Error(c.statusText);return N&&R&&R.hasOwnProperty("status")&&R.hasOwnProperty("response")?R.response:R}function f(t,m,c){return g({url:t+(m&&Object.keys(m).length?"?"+$.param(m):"")},c)}function r(t,m,c){return g({url:t+(m&&Object.keys(m).length?"?"+$.param(m):""),method:"HEAD"},c)}function y(t,m,c){return g({url:t,method:"POST",data:m,headers:{"x-csrf-token":config.csrf_token}},c)}function w(t,m,c){return g({url:t,method:"PATCH",data:m,headers:{"x-csrf-token":config.csrf_token}},c)}function b(t,m,c){return g({url:t,method:"PUT",data:m,headers:{"x-csrf-token":config.csrf_token}},c)}function x(t,m,c){return g({url:t,method:"DELETE",data:m,headers:{"x-csrf-token":config.csrf_token}},c)}},34405:(I,A,u)=>{var p,h;p=[u(49897),u(29930)],h=function(E,v){const C={},g={delay:200,appendTo:null};C.init=f=>{const r={...g,...f},{input:y,onSelect:w}=r;app.loadJQueryUI(function(){y.autocomplete({...r,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(b,x){P(y,w,b,x)}})})},C.user=function(f,r,y){typeof r=="function"&&(y=r,r={}),r=r||{},C.init({input:f,onSelect:y,source:(w,b)=>{r.query=w.term,E.get("/api/users",r,function(x,t){if(x)return v.error(x);if(t&&t.users){const m=t.users.map(function(c){const M=$("<div></div>").html(c.username).text();return c&&{label:M,value:M,user:{uid:c.uid,name:c.username,slug:c.userslug,username:c.username,userslug:c.userslug,picture:c.picture,banned:c.banned,"icon:text":c["icon:text"],"icon:bgColor":c["icon:bgColor"]}}});b(m)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},C.group=function(f,r){C.init({input:f,onSelect:r,source:(y,w)=>{socket.emit("groups.search",{query:y.term},function(b,x){if(b)return v.error(b);if(x&&x.length){const t=x.map(function(m){return m&&{label:m.name,value:m.name,group:m}});w(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},C.tag=function(f,r){C.init({input:f,onSelect:r,delay:100,source:(y,w)=>{socket.emit("topics.autocompleteTags",{query:y.term,cid:ajaxify.data.cid||0},function(b,x){if(b)return v.error(b);x&&w(x),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function P(f,r,y,w){r=r||function(){};const b=jQuery.Event("keypress");b.which=13,b.keyCode=13,setTimeout(function(){f.trigger(b)},100),r(y,w)}return C}.apply(A,p),h!==void 0&&(I.exports=h)},29869:I=>{I.exports=function(A,u,p){u.setGlobal("true",!0),u.setGlobal("false",!1);const h=24*60*60*1e3,E={displayMenuItem:C,buildMetaTag:g,buildLinkTag:P,stringify:f,escape:r,stripTags:y,buildCategoryIcon:w,buildCategoryLabel:b,generateCategoryBackground:x,generateChildrenCategories:t,generateTopicClass:m,membershipBtn:c,spawnPrivilegeStates:M,localeToHTML:_,renderTopicImage:N,renderDigestAvatar:R,userAgentIcons:o,buildAvatar:d,increment:D,generateWroteReplied:S,generateRepliedTo:T,generateWrote:F,isoTimeToLocaleString:H,shouldHideReplyContainer:j,humanReadableNumber:K,formattedNumber:z,generatePlaceholderWave:J,register:a,__escape:v};function v(e){return e}function C(e,n){const s=e.navigation[n];return!(!s||s.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||s.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||s.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function g(e){const n=e.name?'name="'+e.name+'" ':"",s=e.property?'property="'+e.property+'" ':"",i=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+n+s+i+`/>
	`}function P(e){const n=["link","rel","as","type","href","sizes","title","crossorigin"],[s,i,l,k,B,L,W,Y]=n.map(U=>e[U]?`${U}="${e[U]}" `:"");return"<link "+s+i+l+k+L+W+B+Y+`/>
	`}function f(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function r(e){return A.escapeHTML(e)}function y(e){return A.stripHTMLTags(e)}function w(e,n,s){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${s}" style="${x(e)} width:${n}; height: ${n}; font-size: ${parseInt(n,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function b(e,n="a",s=""){if(!e)return"";const i=n==="a"?`href="${p}/category/${e.slug}"`:"";return`<${n} ${i} class="badge px-1 text-truncate text-decoration-none ${s}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${n}>`}function x(e){if(!e)return"";const n=[];return e.bgColor&&(n.push("background-color: "+e.bgColor),n.push(`border-color: ${e.bgColor}!important`)),e.color&&n.push("color: "+e.color),e.backgroundImage&&(n.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&n.push("background-size: "+e.imageClass)),n.join("; ")+";"}function t(e){let n="";return!e||!e.children||!e.children.length||(e.children.forEach(function(s){if(s&&!s.isSection){const i=s.link?s.link:p+"/category/"+s.slug;n+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+x(s)+'"><i class="fa fa-fw '+s.icon+'"></i></div><a href="'+i+'"><small>'+s.name+"</small></a></span>"}}),n=n&&'<span class="category-children">'+n+"</span>"),n}function m(e){return["locked","pinned","deleted","unread","scheduled"].filter(s=>!!e[s]).join(" ")}function c(e,n=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${n}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${n}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${n}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function M(e,n,s){const i=[];for(const l in n)n.hasOwnProperty(l)&&i.push({name:l,state:n[l],type:s[l]});return i.map(function(l){const k=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],B=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],L=["groups:moderate"],W=e==="guests"&&(k.includes(l.name)||l.name.startsWith("groups:admin:"))||e==="spiders"&&!B.includes(l.name)||e==="Global Moderators"&&L.includes(l.name);return`
				<td data-privilege="${l.name}" data-value="${l.state}" data-type="${l.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${l.state?" checked":""}${W?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function _(e,n){return e=e||n||"en-GB",e.replace("_","-")}function N(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function R(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function o(e){let n="";switch(e.platform){case"Linux":n+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":n+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":n+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":n+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":n+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":n+='<i class="fa fa-fw fa-mobile"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":n+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":n+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":n+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":n+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":n+='<i class="fa fa-fw fa-edge"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}return n}function d(e,n,s,i,l){e||(e=this),i=i||"";const k=new Map([["title",e.username],["data-uid",e.uid],["class",`avatar ${i}${s?" avatar-rounded":""}`]]),B=[`--avatar-size: ${n};`],L=Y=>Array.from(Y).reduce((U,[G,Q])=>(U+=` ${G}="${Q}"`,U),"");let W="";return e.picture&&(W+=`<img${L(k)} alt="${e.username}" loading="lazy" component="${l||"avatar/picture"}" src="${e.picture}" style="${B.join(" ")}" onError="this.remove()" itemprop="image" />`),W+=`<span${L(k)} component="${l||"avatar/icon"}" style="${B.join(" ")} background-color: ${e["icon:bgColor"]}">${e["icon:text"]}</span>`,W}function D(e,n){return String(e+parseInt(n,10))}function S(e,n){return e.toPid?T(e,n):F(e,n)}function T(e,n){const s=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-n*h?"on":"ago"}, ${e.toPid}, ${p}/post/${e.toPid}, ${s}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function F(e,n){return`[[topic:wrote-${e.timestamp<Date.now()-n*h?"on":"ago"}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function H(e,n="en-GB"){return new Date(e).toLocaleString([n],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function j(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function K(e,n=1){return A.makeNumberHumanReadable(e,n)}function z(e){return A.addCommas(e)}function J(e){return e.map(s=>s==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${s}"></div>
			</li>`)}function a(){Object.keys(E).forEach(function(e){u.registerHelper(e,E[e])})}return E}},30076:(I,A,u)=>{var p,h;const E=u(29869);p=[u(77918),u(81335)],h=function(v,C){return E(v,C,config.relative_path)}.apply(A,p),h!==void 0&&(I.exports=h)},13230:(I,A,u)=>{var p,h,E;(function(v){h=[u(53050)],p=v,E=typeof p=="function"?p.apply(A,h):p,E!==void 0&&(I.exports=E)})(function(v){const C=v("[^\\p{L}\\s\\d\\-_]","g"),g=/[^\w\s\d\-_]/g,P=/^\s+|\s+$/g,f=/\s+/g,r=/-+/g,y=/-$/g,w=/^-/g,b=/^[\w\d\s.,\-@]+$/;return function(t,m){return t?(t=String(t).replace(P,""),b.test(t)?t=t.replace(g,"-"):t=v.replace(t,C,"-"),t=m?t:t.toLocaleLowerCase(),t=t.replace(f,"-"),t=t.replace(r,"-"),t=t.replace(y,""),t=t.replace(w,""),t):""}})}}]);
