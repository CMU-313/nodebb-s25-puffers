"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[91977,99127,34271,13417,1091,49897,34405],{67341:(_,p,u)=>{var m,g;m=[u(40027),u(29930),u(34405)],g=function(y,E,c){const s={};return s.init=function(){$('[data-action="clear"]').on("click",function(){return y.confirm("[[admin/advanced/events:confirm-delete-all-events]]",o=>{o&&socket.emit("admin.deleteAllEvents",function(r){if(r)return E.error(r);$(".events-list").empty()})}),!1}),$(".delete-event").on("click",function(){const o=$(this).parents("[data-eid]"),r=o.attr("data-eid");socket.emit("admin.deleteEvents",[r],function(a){if(a)return E.error(a);o.remove()})}),$("#user-group-select").on("change",function(){const o=$(this).val();$("#username").toggleClass("hidden",o!=="username"),o!=="username"&&$("#username").val(""),$("#group").toggleClass("hidden",o!=="group"),o!=="group"&&$("#group").val("")}),c.user($("#username")),c.group($("#group")),$("#apply").on("click",s.refresh)},s.refresh=function(o){o.preventDefault();const r=$("#filters");ajaxify.go("admin/advanced/events?"+r.serialize())},s}.apply(p,m),g!==void 0&&(_.exports=g)},49897:(_,p,u)=>{u.r(p),u.d(p,{del:()=>l,get:()=>r,head:()=>a,patch:()=>d,post:()=>f,put:()=>i});var m=u(91749),g=u.n(m),y=u(40027),E=u.n(y);const c=config.relative_path+"/api/v3";async function s(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:c+e.url,typeof n=="function"){o(e).then(t=>n(null,t),t=>n(t));return}try{return await o(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again."){const{url:v}=await(0,m.fire)("filter:admin.reauth",{url:"login"});return(0,y.confirm)("[[error:api.reauth-required]]",A=>{A&&ajaxify.go(v)})}throw t}}async function o(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,m.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:v}=t,A=v.get("content-type"),D=A&&A.startsWith("application/json");let h;if(e.method!=="HEAD"&&(D?h=await t.json():h=await t.text()),!t.ok)throw h?new Error(D?h.status.message:h):new Error(t.statusText);return D&&h&&h.hasOwnProperty("status")&&h.hasOwnProperty("response")?h.response:h}function r(e,n,t){return s({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function a(e,n,t){return s({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},t)}function f(e,n,t){return s({url:e,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function d(e,n,t){return s({url:e,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function i(e,n,t){return s({url:e,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function l(e,n,t){return s({url:e,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}},34405:(_,p,u)=>{var m,g;m=[u(49897),u(29930)],g=function(y,E){const c={},s={delay:200,appendTo:null};c.init=r=>{const a={...s,...r},{input:f,onSelect:d}=a;app.loadJQueryUI(function(){f.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(i,l){o(f,d,i,l)}})})},c.user=function(r,a,f){typeof a=="function"&&(f=a,a={}),a=a||{},c.init({input:r,onSelect:f,source:(d,i)=>{a.query=d.term,y.get("/api/users",a,function(l,e){if(l)return E.error(l);if(e&&e.users){const n=e.users.map(function(t){const v=$("<div></div>").html(t.username).text();return t&&{label:v,value:v,user:{uid:t.uid,name:t.username,slug:t.userslug,username:t.username,userslug:t.userslug,picture:t.picture,banned:t.banned,"icon:text":t["icon:text"],"icon:bgColor":t["icon:bgColor"]}}});i(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},c.group=function(r,a){c.init({input:r,onSelect:a,source:(f,d)=>{socket.emit("groups.search",{query:f.term},function(i,l){if(i)return E.error(i);if(l&&l.length){const e=l.map(function(n){return n&&{label:n.name,value:n.name,group:n}});d(e)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},c.tag=function(r,a){c.init({input:r,onSelect:a,delay:100,source:(f,d)=>{socket.emit("topics.autocompleteTags",{query:f.term,cid:ajaxify.data.cid||0},function(i,l){if(i)return E.error(i);l&&d(l),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function o(r,a,f,d){a=a||function(){};const i=jQuery.Event("keypress");i.which=13,i.keyCode=13,setTimeout(function(){r.trigger(i)},100),a(f,d)}return c}.apply(p,m),g!==void 0&&(_.exports=g)}}]);
