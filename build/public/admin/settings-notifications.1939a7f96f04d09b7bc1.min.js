"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[58087,99127,34271,13417,1091,49897,34405],{29821:(A,_,c)=>{var d,m;d=[c(34405)],m=function(g){const E={};return E.init=function(){const o=$('[data-field="welcomeUid"]');g.user(o,function(h,y){setTimeout(function(){o.val(y.item.user.uid)})})},E}.apply(_,d),m!==void 0&&(A.exports=m)},49897:(A,_,c)=>{c.r(_),c.d(_,{del:()=>u,get:()=>f,head:()=>a,patch:()=>s,post:()=>i,put:()=>r});var d=c(91749),m=c.n(d),g=c(40027),E=c.n(g);const o=config.relative_path+"/api/v3";async function h(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:o+t.url,typeof n=="function"){y(t).then(e=>n(null,e),e=>n(e));return}try{return await y(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again."){const{url:p}=await(0,d.fire)("filter:admin.reauth",{url:"login"});return(0,g.confirm)("[[error:api.reauth-required]]",D=>{D&&ajaxify.go(p)})}throw e}}async function y(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,d.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:p}=e,D=p.get("content-type"),x=D&&D.startsWith("application/json");let l;if(t.method!=="HEAD"&&(x?l=await e.json():l=await e.text()),!e.ok)throw l?new Error(x?l.status.message:l):new Error(e.statusText);return x&&l&&l.hasOwnProperty("status")&&l.hasOwnProperty("response")?l.response:l}function f(t,n,e){return h({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function a(t,n,e){return h({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"HEAD"},e)}function i(t,n,e){return h({url:t,method:"POST",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function s(t,n,e){return h({url:t,method:"PATCH",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function r(t,n,e){return h({url:t,method:"PUT",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function u(t,n,e){return h({url:t,method:"DELETE",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}},34405:(A,_,c)=>{var d,m;d=[c(49897),c(29930)],m=function(g,E){const o={},h={delay:200,appendTo:null};o.init=f=>{const a={...h,...f},{input:i,onSelect:s}=a;app.loadJQueryUI(function(){i.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(r,u){y(i,s,r,u)}})})},o.user=function(f,a,i){typeof a=="function"&&(i=a,a={}),a=a||{},o.init({input:f,onSelect:i,source:(s,r)=>{a.query=s.term,g.get("/api/users",a,function(u,t){if(u)return E.error(u);if(t&&t.users){const n=t.users.map(function(e){const p=$("<div></div>").html(e.username).text();return e&&{label:p,value:p,user:{uid:e.uid,name:e.username,slug:e.userslug,username:e.username,userslug:e.userslug,picture:e.picture,banned:e.banned,"icon:text":e["icon:text"],"icon:bgColor":e["icon:bgColor"]}}});r(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},o.group=function(f,a){o.init({input:f,onSelect:a,source:(i,s)=>{socket.emit("groups.search",{query:i.term},function(r,u){if(r)return E.error(r);if(u&&u.length){const t=u.map(function(n){return n&&{label:n.name,value:n.name,group:n}});s(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},o.tag=function(f,a){o.init({input:f,onSelect:a,delay:100,source:(i,s)=>{socket.emit("topics.autocompleteTags",{query:i.term,cid:ajaxify.data.cid||0},function(r,u){if(r)return E.error(r);u&&s(u),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function y(f,a,i,s){a=a||function(){};const r=jQuery.Event("keypress");r.which=13,r.keyCode=13,setTimeout(function(){f.trigger(r)},100),a(i,s)}return o}.apply(_,d),m!==void 0&&(A.exports=m)}}]);
