"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,34271,49897,53020,99127],{49897:(y,u,n)=>{n.r(u),n.d(u,{del:()=>A,get:()=>f,head:()=>d,patch:()=>P,post:()=>D,put:()=>O});var l=n(91749),i=n.n(l),c=n(40027),b=n.n(c);const m=config.relative_path+"/api/v3";async function s(e,a){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:m+e.url,typeof a=="function"){o(e).then(t=>a(null,t),t=>a(t));return}try{return await o(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again."){const{url:E}=await(0,l.fire)("filter:admin.reauth",{url:"login"});return(0,c.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go(E)})}throw t}}async function o(e){const{url:a}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,l.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(a,e),{headers:E}=t,h=E.get("content-type"),g=h&&h.startsWith("application/json");let r;if(e.method!=="HEAD"&&(g?r=await t.json():r=await t.text()),!t.ok)throw r?new Error(g?r.status.message:r):new Error(t.statusText);return g&&r&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r}function f(e,a,t){return s({url:e+(a&&Object.keys(a).length?"?"+$.param(a):"")},t)}function d(e,a,t){return s({url:e+(a&&Object.keys(a).length?"?"+$.param(a):""),method:"HEAD"},t)}function D(e,a,t){return s({url:e,method:"POST",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function P(e,a,t){return s({url:e,method:"PATCH",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function O(e,a,t){return s({url:e,method:"PUT",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function A(e,a,t){return s({url:e,method:"DELETE",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}},86296:(y,u,n)=>{var l,i;l=[n(49897),n(40027),n(29930)],i=function(c,b,m){const s={};return s.init=function(o){const f=b.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(o.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const d=f.find("#newEmail").val();return c.post("/users/"+o.uid+"/emails",{skipConfirmation:!0,email:d}).then(()=>{f.modal("hide"),o.onSuccess(d)}).catch(m.error),!1}}}})},s}.apply(u,l),i!==void 0&&(y.exports=i)}}]);
